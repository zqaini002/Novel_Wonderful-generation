(function(){"use strict";var e={412:function(e,t,a){var l=a(788),r=a.n(l);const o=r().create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"http://localhost:8080",timeout:1e4,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});o.interceptors.request.use((e=>{const t=localStorage.getItem("user");if(t)try{const a=JSON.parse(t),l=a.accessToken||a.token;l&&(e.headers["Authorization"]=`Bearer ${l}`)}catch(a){}return e}),(e=>Promise.reject(e))),o.interceptors.response.use((e=>e.data),(e=>{console.log("API错误拦截器捕获到错误:",e),e.response&&console.log("错误响应详情:",{status:e.response.status,statusText:e.response.statusText,data:e.response.data});const t=(()=>{if(e.isDisabledAccount)return!0;if(!e.response)return!1;const t=e.response.data,a=("string"===typeof t?t:"")||t?.message||t?.error||e.message||"";return a.includes("禁用")||a.includes("disabled")||a.includes("账号已被禁用")})();if(t){console.log("检测到禁用账户错误"),e.isDisabledAccount=!0,e.disabledMessage="账号已被禁用，请联系管理员";const t=new Error("账号已被禁用，请联系管理员");return t.isDisabledAccount=!0,t.response=e.response,Promise.reject(t)}return e.response&&401===e.response.status&&!t&&(localStorage.removeItem("user"),"/login"!==window.location.pathname&&(window.location.href="/login?redirect="+encodeURIComponent(window.location.pathname))),Promise.reject(e)})),t.A=o},7974:function(e,t,a){var l=a(5130),r=a(6768);const o={class:"app-container"};function n(e,t,a,n,s,i){const u=(0,r.g2)("header-component"),c=(0,r.g2)("el-header"),d=(0,r.g2)("router-view"),m=(0,r.g2)("el-main"),p=(0,r.g2)("footer-component"),g=(0,r.g2)("el-footer"),v=(0,r.g2)("el-container"),h=(0,r.g2)("el-config-provider");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(h,{locale:e.zhCn},{default:(0,r.k6)((()=>[(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.bF)(u)])),_:1}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[(0,r.bF)(l.eB,{name:"fade",mode:"out-in"},{default:(0,r.k6)((()=>[(0,r.bF)(d)])),_:1})])),_:1}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(p)])),_:1})])),_:1})])),_:1},8,["locale"])])}var s=a(782),i=a(7722),u=a(1219),c=a(5186),d=a(4232);const m={class:"header-container"},p={class:"logo"},g={class:"logo-content"},v={class:"menu-items"},h={class:"user-area"},k={class:"avatar-wrapper"},f={class:"username"},b={key:1,class:"auth-buttons"};function y(e,t,a,l,o,n){const s=(0,r.g2)("Reading"),i=(0,r.g2)("el-icon"),u=(0,r.g2)("router-link"),c=(0,r.g2)("HomeFilled"),y=(0,r.g2)("el-menu-item"),w=(0,r.g2)("Upload"),F=(0,r.g2)("InfoFilled"),L=(0,r.g2)("el-avatar"),_=(0,r.g2)("ArrowDown"),C=(0,r.g2)("User"),E=(0,r.g2)("el-dropdown-item"),S=(0,r.g2)("Collection"),A=(0,r.g2)("Monitor"),T=(0,r.g2)("Document"),D=(0,r.g2)("SwitchButton"),R=(0,r.g2)("el-dropdown-menu"),I=(0,r.g2)("el-dropdown"),N=(0,r.g2)("Key"),V=(0,r.g2)("el-button"),P=(0,r.g2)("UserFilled"),O=(0,r.g2)("el-menu");return(0,r.uX)(),(0,r.CE)("div",m,[(0,r.bF)(O,{"default-active":e.activeIndex,class:"menu",mode:"horizontal",router:"",ellipsis:!1},{default:(0,r.k6)((()=>[(0,r.Lk)("div",p,[(0,r.bF)(u,{to:"/"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",g,[(0,r.bF)(i,{class:"logo-icon"},{default:(0,r.k6)((()=>[(0,r.bF)(s)])),_:1}),t[0]||(t[0]=(0,r.Lk)("h1",null,"小说智析",-1))])])),_:1})]),(0,r.Lk)("div",v,[(0,r.bF)(y,{index:"/"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(c)])),_:1}),t[1]||(t[1]=(0,r.Lk)("span",null,"首页",-1))])),_:1}),(0,r.bF)(y,{index:"/upload"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(w)])),_:1}),t[2]||(t[2]=(0,r.Lk)("span",null,"上传小说",-1))])),_:1}),(0,r.bF)(y,{index:"/about"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(F)])),_:1}),t[3]||(t[3]=(0,r.Lk)("span",null,"关于",-1))])),_:1})]),(0,r.Lk)("div",h,[e.isLoggedIn?((0,r.uX)(),(0,r.Wv)(I,{key:0,trigger:"click"},{dropdown:(0,r.k6)((()=>[(0,r.bF)(R,null,{default:(0,r.k6)((()=>[(0,r.bF)(E,{onClick:e.goToProfile},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(C)])),_:1}),t[4]||(t[4]=(0,r.Lk)("span",null,"个人中心",-1))])),_:1},8,["onClick"]),(0,r.bF)(E,{onClick:e.goToMyNovels},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(S)])),_:1}),t[5]||(t[5]=(0,r.Lk)("span",null,"我的小说",-1))])),_:1},8,["onClick"]),e.isAdmin?((0,r.uX)(),(0,r.Wv)(E,{key:0,onClick:e.goToDashboard,class:"admin-function"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(A)])),_:1}),t[6]||(t[6]=(0,r.Lk)("span",null,"管理员仪表盘",-1))])),_:1},8,["onClick"])):(0,r.Q3)("",!0),e.isAdmin?((0,r.uX)(),(0,r.Wv)(E,{key:1,onClick:e.goToSystemLogs,class:"admin-function"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(T)])),_:1}),t[7]||(t[7]=(0,r.Lk)("span",null,"系统日志",-1))])),_:1},8,["onClick"])):(0,r.Q3)("",!0),(0,r.bF)(E,{divided:"",onClick:e.logout},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(D)])),_:1}),t[8]||(t[8]=(0,r.Lk)("span",null,"退出登录",-1))])),_:1},8,["onClick"])])),_:1})])),default:(0,r.k6)((()=>[(0,r.Lk)("div",k,[(0,r.bF)(L,{size:32,src:e.avatarUrl},null,8,["src"]),(0,r.Lk)("span",f,(0,d.v_)(e.displayName),1),(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(_)])),_:1})])])),_:1})):((0,r.uX)(),(0,r.CE)("div",b,[(0,r.bF)(V,{type:"primary",size:"small",onClick:e.login},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(N)])),_:1}),t[9]||(t[9]=(0,r.Lk)("span",null,"登录",-1))])),_:1},8,["onClick"]),(0,r.bF)(V,{size:"small",onClick:e.register},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(P)])),_:1}),t[10]||(t[10]=(0,r.Lk)("span",null,"注册",-1))])),_:1},8,["onClick"])]))])])),_:1},8,["default-active"])])}a(4114);var w=a(1387),F=a(7477),L=(0,r.pM)({name:"HeaderComponent",components:{HomeFilled:F.oCE,Upload:F._OO,InfoFilled:F.N_H,User:F.KJW,ArrowDown:F.yd$,Collection:F.pMc,SwitchButton:F.L$q,Reading:F.zKN,Key:F.Uzy,UserFilled:F.eHG,Monitor:F.VAG,Document:F.yoT},setup(){const e=(0,s.Pj)(),t=(0,w.lq)(),a=(0,w.rd)(),l=(0,r.EW)((()=>t.path)),o=(0,r.EW)((()=>e.getters["auth/isLoggedIn"])),n=(0,r.EW)((()=>e.getters["auth/currentUser"])),i=(0,r.EW)((()=>n.value&&(n.value.nickname||n.value.username||n.value.name)||"用户")),c=(0,r.EW)((()=>n.value&&n.value.avatar?n.value.avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png")),d=(0,r.EW)((()=>!(!n.value||!n.value.roles)&&n.value.roles.includes("ROLE_ADMIN"))),m=()=>{a.push("/login")},p=()=>{a.push("/register")},g=()=>{e.dispatch("auth/logout"),a.push("/login"),u.nk.success("已退出登录")},v=()=>{a.push("/admin/dashboard")},h=()=>{a.push("/profile")},k=()=>{a.push("/my-novels")},f=()=>{a.push("/admin/logs")};return{activeIndex:l,isLoggedIn:o,displayName:i,avatarUrl:c,isAdmin:d,login:m,register:p,logout:g,goToDashboard:v,goToProfile:h,goToMyNovels:k,goToSystemLogs:f}}}),_=a(1241);const C=(0,_.A)(L,[["render",y],["__scopeId","data-v-09c85cc1"]]);var E=C;const S={class:"footer-container"},A={class:"footer-content"},T={class:"footer-logo"},D={class:"logo-wrapper"},R={class:"social-icons"},I={href:"#",class:"social-icon"},N={href:"#",class:"social-icon"},V={href:"#",class:"social-icon"},P={class:"footer-links"},O={class:"link-group"},x={class:"link-group"},U={href:"#"},W={href:"#"},M={href:"#"},z={class:"link-group"},K={href:"mailto:contact@novelassistant.com"},X={href:"#"},$={href:"#"},B={class:"footer-bottom"};function q(e,t,a,l,o,n){const s=(0,r.g2)("Reading"),i=(0,r.g2)("el-icon"),u=(0,r.g2)("ChatDotRound"),c=(0,r.g2)("Share"),m=(0,r.g2)("Position"),p=(0,r.g2)("HomeFilled"),g=(0,r.g2)("router-link"),v=(0,r.g2)("Upload"),h=(0,r.g2)("InfoFilled"),k=(0,r.g2)("Document"),f=(0,r.g2)("QuestionFilled"),b=(0,r.g2)("ChatLineSquare"),y=(0,r.g2)("Message"),w=(0,r.g2)("Promotion"),F=(0,r.g2)("Link");return(0,r.uX)(),(0,r.CE)("div",S,[(0,r.Lk)("div",A,[(0,r.Lk)("div",T,[(0,r.Lk)("div",D,[(0,r.bF)(i,{class:"logo-icon"},{default:(0,r.k6)((()=>[(0,r.bF)(s)])),_:1}),t[0]||(t[0]=(0,r.Lk)("h2",null,"小说智析",-1))]),t[1]||(t[1]=(0,r.Lk)("p",null,"AI驱动的小说内容分析与摘要生成系统",-1)),(0,r.Lk)("div",R,[(0,r.Lk)("a",I,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(u)])),_:1})]),(0,r.Lk)("a",N,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(c)])),_:1})]),(0,r.Lk)("a",V,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(m)])),_:1})])])]),(0,r.Lk)("div",P,[(0,r.Lk)("div",O,[t[5]||(t[5]=(0,r.Lk)("h3",null,"快速链接",-1)),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.bF)(g,{to:"/"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(p)])),_:1}),t[2]||(t[2]=(0,r.eW)(" 首页"))])),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(g,{to:"/upload"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(v)])),_:1}),t[3]||(t[3]=(0,r.eW)(" 上传小说"))])),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(g,{to:"/about"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(h)])),_:1}),t[4]||(t[4]=(0,r.eW)(" 关于我们"))])),_:1})])])]),(0,r.Lk)("div",x,[t[9]||(t[9]=(0,r.Lk)("h3",null,"帮助支持",-1)),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.Lk)("a",U,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(k)])),_:1}),t[6]||(t[6]=(0,r.eW)(" 使用指南"))])]),(0,r.Lk)("li",null,[(0,r.Lk)("a",W,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(f)])),_:1}),t[7]||(t[7]=(0,r.eW)(" 常见问题"))])]),(0,r.Lk)("li",null,[(0,r.Lk)("a",M,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(b)])),_:1}),t[8]||(t[8]=(0,r.eW)(" 反馈建议"))])])])]),(0,r.Lk)("div",z,[t[13]||(t[13]=(0,r.Lk)("h3",null,"联系我们",-1)),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.Lk)("a",K,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(y)])),_:1}),t[10]||(t[10]=(0,r.eW)(" 邮箱联系"))])]),(0,r.Lk)("li",null,[(0,r.Lk)("a",X,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(w)])),_:1}),t[11]||(t[11]=(0,r.eW)(" 社交媒体"))])]),(0,r.Lk)("li",null,[(0,r.Lk)("a",$,[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(F)])),_:1}),t[12]||(t[12]=(0,r.eW)(" 合作伙伴"))])])])])])]),t[15]||(t[15]=(0,r.Lk)("div",{class:"footer-wave"},[(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 60"},[(0,r.Lk)("path",{fill:"var(--primary-color)","fill-opacity":"0.05",d:"M0,32L80,42.7C160,53,320,75,480,69.3C640,64,800,32,960,21.3C1120,11,1280,21,1360,26.7L1440,32L1440,0L1360,0C1280,0,1120,0,960,0C800,0,640,0,480,0C320,0,160,0,80,0L0,0Z"})])],-1)),(0,r.Lk)("div",B,[(0,r.Lk)("p",null,"© "+(0,d.v_)(e.currentYear)+" 小说智析 - 版权所有",1),t[14]||(t[14]=(0,r.Lk)("p",null,"本网站仅供学习交流使用，请勿用于任何商业目的",-1))])])}var j=(0,r.pM)({name:"FooterComponent",components:{Reading:F.zKN,ChatDotRound:F.wUE,Share:F.SYj,Position:F.yXV,HomeFilled:F.oCE,Upload:F._OO,InfoFilled:F.N_H,Document:F.yoT,QuestionFilled:F.lOC,ChatLineSquare:F._Rb,Message:F.QBZ,Promotion:F.Yk4,Link:F.N_E},setup(){const e=(0,r.EW)((()=>(new Date).getFullYear()));return{currentYear:e}}});const G=(0,_.A)(j,[["render",q],["__scopeId","data-v-524244c0"]]);var Q=G,H=a(412);class J{login(e,t){return H.A.post("/auth/signin",{username:e,password:t}).then((e=>{const t={...e,accessToken:e.token||e.accessToken,roles:e.roles||[]};return t.roles&&!Array.isArray(t.roles)&&(t.roles="string"===typeof t.roles?[t.roles]:[]),localStorage.setItem("user",JSON.stringify(t)),t})).catch((e=>{if(console.log("登录错误详情:",e),console.log("错误响应数据:",e.response?{status:e.response.status,statusText:e.response.statusText,data:e.response.data,headers:e.response.headers}:"无响应数据"),e.response){const t=e.response.data,a=("string"===typeof t?t:"")||t?.message||t?.error||e.message||"";if(a.includes("禁用")||a.includes("disabled")||a.includes("账号已被禁用")){e.isDisabledAccount=!0,e.disabledMessage="账号已被禁用，请联系管理员";const t=new Error("账号已被禁用，请联系管理员");throw t.isDisabledAccount=!0,t.response=e.response,t}}throw e}))}logout(){localStorage.removeItem("user")}register(e,t,a){return H.A.post("/auth/signup",{username:e,email:t,password:a})}refreshToken(){const e=this.getCurrentUser();return e&&e.refreshToken?H.A.post("/auth/refresh-token",{refreshToken:e.refreshToken}).then((t=>{if(t.token||t.accessToken){const a={...e,token:t.token||t.accessToken,accessToken:t.token||t.accessToken};localStorage.setItem("user",JSON.stringify(a))}return t})):Promise.reject(new Error("无效的刷新令牌"))}isAdmin(){const e=this.getCurrentUser();return!(!e||!e.roles)&&(Array.isArray(e.roles)?e.roles.includes("ROLE_ADMIN"):"ROLE_ADMIN"===e.roles)}getCurrentUser(){const e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e)}catch(t){return console.error("解析用户信息失败:",t),null}}}var Y=new J,Z=Y,ee=(0,r.pM)({name:"App",components:{HeaderComponent:E,FooterComponent:Q,ElConfigProvider:i.H6},setup(){const e=(0,s.Pj)();return(0,r.sV)((()=>{const t=localStorage.getItem("user");if(t)try{const a=JSON.parse(t);if(!a.token&&!a.accessToken)return localStorage.removeItem("user"),void e.dispatch("auth/logout");0,Z.checkAuthStatus().then((t=>{const l=t.data?.isAuthenticated;l?e.commit("auth/loginSuccess",a):(localStorage.removeItem("user"),e.dispatch("auth/logout"),u.nk.warning("登录已过期，请重新登录"))})).catch((()=>{}))}catch(a){localStorage.removeItem("user")}})),{zhCn:c.A}},created(){}});const te=(0,_.A)(ee,[["render",n]]);var ae=te;const le={class:"home-container"},re={class:"hero-section"},oe={class:"hero-content"},ne={class:"action-buttons"},se={class:"hero-image"},ie={class:"features-section"},ue={class:"features-container"},ce={class:"card-header"},de={class:"card-header"},me={class:"card-header"},pe={class:"card-header"},ge={key:0,class:"novels-section"},ve={class:"novels-container"},he={class:"novel-info"},ke={class:"author"},fe={class:"chapters"},be={class:"cta-section"};function ye(e,t,a,l,o,n){const s=(0,r.g2)("el-button"),i=(0,r.g2)("ReadingLamp"),u=(0,r.g2)("el-icon"),c=(0,r.g2)("Document"),m=(0,r.g2)("el-card"),p=(0,r.g2)("Memo"),g=(0,r.g2)("PriceTag"),v=(0,r.g2)("DataAnalysis"),h=(0,r.g2)("el-progress");return(0,r.uX)(),(0,r.CE)("div",le,[(0,r.Lk)("section",re,[(0,r.Lk)("div",oe,[t[5]||(t[5]=(0,r.Lk)("h1",null,"小说智析",-1)),t[6]||(t[6]=(0,r.Lk)("p",{class:"subtitle"},"AI驱动的小说内容分析与摘要生成系统",-1)),t[7]||(t[7]=(0,r.Lk)("p",{class:"description"},"快速了解小说内容，做出明智的阅读决策",-1)),(0,r.Lk)("div",ne,[(0,r.bF)(s,{type:"primary",size:"large",onClick:t[0]||(t[0]=t=>e.$router.push("/upload"))},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("立即体验")]))),_:1}),(0,r.bF)(s,{size:"large",onClick:t[1]||(t[1]=t=>e.$router.push("/about"))},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("了解更多")]))),_:1})])]),(0,r.Lk)("div",se,[(0,r.bF)(u,{size:280,color:"#409EFF"},{default:(0,r.k6)((()=>[(0,r.bF)(i)])),_:1})])]),(0,r.Lk)("section",ie,[t[16]||(t[16]=(0,r.Lk)("h2",null,"主要功能",-1)),(0,r.Lk)("div",ue,[(0,r.bF)(m,{class:"feature-card"},{header:(0,r.k6)((()=>[(0,r.Lk)("div",ce,[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(c)])),_:1}),t[8]||(t[8]=(0,r.Lk)("span",null,"自动化文本处理",-1))])])),default:(0,r.k6)((()=>[t[9]||(t[9]=(0,r.Lk)("div",{class:"card-content"},[(0,r.Lk)("p",null,"支持多种来源的小说内容导入，包括网页链接解析和本地文件上传（TXT/EPUB格式）。"),(0,r.Lk)("p",null,"自动识别章节标题，过滤广告内容，提取有效文本。")],-1))])),_:1}),(0,r.bF)(m,{class:"feature-card"},{header:(0,r.k6)((()=>[(0,r.Lk)("div",de,[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(p)])),_:1}),t[10]||(t[10]=(0,r.Lk)("span",null,"智能摘要生成",-1))])])),default:(0,r.k6)((()=>[t[11]||(t[11]=(0,r.Lk)("div",{class:"card-content"},[(0,r.Lk)("p",null,"单章摘要：提取每章核心情节，约200字左右。"),(0,r.Lk)("p",null,"情节脉络图：对小说内容进行主题聚类分析，展示故事脉络。"),(0,r.Lk)("p",null,"全书概述：整合前100章内容，生成完整故事大纲。")],-1))])),_:1}),(0,r.bF)(m,{class:"feature-card"},{header:(0,r.k6)((()=>[(0,r.Lk)("div",me,[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(g)])),_:1}),t[12]||(t[12]=(0,r.Lk)("span",null,"个性化标签系统",-1))])])),default:(0,r.k6)((()=>[t[13]||(t[13]=(0,r.Lk)("div",{class:"card-content"},[(0,r.Lk)("p",null,"推荐标签：突出小说的积极特点。"),(0,r.Lk)("p",null,"避雷标签：提示小说的潜在问题。"),(0,r.Lk)("p",null,"阅读门槛标签：说明需要的前置知识。"),(0,r.Lk)("p",null,"根据读者反馈不断优化标签精准度。")],-1))])),_:1}),(0,r.bF)(m,{class:"feature-card"},{header:(0,r.k6)((()=>[(0,r.Lk)("div",pe,[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(v)])),_:1}),t[14]||(t[14]=(0,r.Lk)("span",null,"数据可视化分析",-1))])])),default:(0,r.k6)((()=>[t[15]||(t[15]=(0,r.Lk)("div",{class:"card-content"},[(0,r.Lk)("p",null,"关键词云：展示小说关键词及其出现频率。"),(0,r.Lk)("p",null,"情节波动图：图形化展示故事情节起伏变化。"),(0,r.Lk)("p",null,"风格分析：多维度分析小说的文风特点。")],-1))])),_:1})])]),l.novels.length>0?((0,r.uX)(),(0,r.CE)("section",ge,[t[17]||(t[17]=(0,r.Lk)("h2",null,"热门小说",-1)),(0,r.Lk)("div",ve,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.novels,(t=>((0,r.uX)(),(0,r.Wv)(m,{key:t.id,class:"novel-card",onClick:a=>e.$router.push(`/novel/${t.id}`)},{default:(0,r.k6)((()=>[(0,r.Lk)("div",he,[(0,r.Lk)("h3",null,(0,d.v_)(t.title),1),(0,r.Lk)("p",ke,"作者："+(0,d.v_)(t.author),1),(0,r.bF)(h,{"text-inside":!0,"stroke-width":16,percentage:t.totalChapters&&t.totalChapters>0?Math.round((t.processedChapters||0)/t.totalChapters*100):0,status:t.processedChapters>=t.totalChapters?"success":""},null,8,["percentage","status"]),(0,r.Lk)("p",fe," 已处理: "+(0,d.v_)(t.processedChapters||0)+"/"+(0,d.v_)(t.totalChapters||0)+" 章 ",1)])])),_:2},1032,["onClick"])))),128))])])):(0,r.Q3)("",!0),(0,r.Lk)("section",be,[t[19]||(t[19]=(0,r.Lk)("h2",null,"开始探索您的小说",-1)),t[20]||(t[20]=(0,r.Lk)("p",null,"上传您的小说文件或输入网页链接，让AI为您生成摘要和分析",-1)),(0,r.bF)(s,{type:"primary",size:"large",onClick:t[2]||(t[2]=t=>e.$router.push("/upload"))},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.eW)("立即开始")]))),_:1})])])}var we=a(144),Fe={name:"HomeView",components:{Document:F.yoT,Memo:F.lDj,PriceTag:F.y1_,DataAnalysis:F.ja0,ReadingLamp:F.Jei},setup(){const e=(0,s.Pj)(),t=(0,we.KR)(!1),a=(0,r.EW)((()=>e.state.novels));return(0,r.sV)((async()=>{t.value=!0;try{await e.dispatch("fetchNovels")}catch(a){console.error("获取小说列表失败:",a)}finally{t.value=!1}})),{novels:a,loading:t}}};const Le=(0,_.A)(Fe,[["render",ye],["__scopeId","data-v-14e05f5c"]]);var _e=Le;const Ce={class:"novel-detail-container"},Ee={key:0,class:"loading-container"},Se={key:1,class:"error-container"},Ae={key:2,class:"novel-content"},Te={class:"demo-alert-content"},De={class:"novel-header"},Re={class:"card-header"},Ie={class:"title"},Ne={class:"tags"},Ve={class:"author"},Pe={class:"description"},Oe={class:"summary-section"},xe={class:"summary-content"},Ue={class:"summary-content"},We={class:"summary-content"},Me={key:0,class:"chapters-section"},ze={class:"tags-section"},Ke={class:"tags-group"},Xe={class:"tags-group"},$e={class:"tags-group"},Be={class:"visualization-section"},qe={class:"vis-header"},je={class:"vis-container"},Ge={class:"vis-container"},Qe={class:"vis-container"},He={key:0},Je={class:"chapter-keywords"},Ye={class:"dialog-footer"};function Ze(e,t,a,l,o,n){const s=(0,r.g2)("el-breadcrumb-item"),i=(0,r.g2)("el-breadcrumb"),u=(0,r.g2)("el-skeleton"),c=(0,r.g2)("el-button"),m=(0,r.g2)("el-result"),p=(0,r.g2)("InfoFilled"),g=(0,r.g2)("el-icon"),v=(0,r.g2)("el-alert"),h=(0,r.g2)("el-tag"),k=(0,r.g2)("el-tab-pane"),f=(0,r.g2)("el-table-column"),b=(0,r.g2)("el-table"),y=(0,r.g2)("FullScreen"),w=(0,r.g2)("keyword-cloud"),F=(0,r.g2)("plot-trend-chart"),L=(0,r.g2)("structure-analysis-chart"),_=(0,r.g2)("el-tabs"),C=(0,r.g2)("el-dialog"),E=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",Ce,[(0,r.bF)(i,{separator:"/"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{to:{name:"home"}},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("首页")]))),_:1}),(0,r.bF)(s,null,{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)("小说详情")]))),_:1}),(0,r.bF)(s,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(l.novel?.title||"加载中..."),1)])),_:1})])),_:1}),l.loading?((0,r.uX)(),(0,r.CE)("div",Ee,[(0,r.bF)(u,{rows:10,animated:""})])):l.error?((0,r.uX)(),(0,r.CE)("div",Se,[(0,r.bF)(m,{icon:"error",title:"获取数据失败","sub-title":l.error},{extra:(0,r.k6)((()=>[(0,r.bF)(c,{type:"primary",onClick:l.fetchData},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("重试")]))),_:1},8,["onClick"]),(0,r.bF)(c,{onClick:t[0]||(t[0]=t=>e.$router.push({name:"home"}))},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("返回首页")]))),_:1})])),_:1},8,["sub-title"])])):((0,r.uX)(),(0,r.CE)("div",Ae,[l.isDemo?((0,r.uX)(),(0,r.Wv)(v,{key:0,title:"当前处于演示模式",type:"warning",class:"demo-notice","show-icon":"",closable:!1,effect:"dark"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Te,[(0,r.bF)(g,{class:"demo-icon"},{default:(0,r.k6)((()=>[(0,r.bF)(p)])),_:1}),t[10]||(t[10]=(0,r.Lk)("span",null,"显示的是预设数据，而非实际处理结果。您可以浏览所有功能，但数据仅供展示",-1))])])),_:1})):(0,r.Q3)("",!0),(0,r.Lk)("div",De,[(0,r.Lk)("div",Re,[(0,r.Lk)("span",Ie,(0,d.v_)(l.novel.title),1),(0,r.Lk)("div",Ne,["PROCESSING"===l.novel.processingStatus?((0,r.uX)(),(0,r.Wv)(h,{key:0,type:"warning"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("处理中")]))),_:1})):"COMPLETED"===l.novel.processingStatus?((0,r.uX)(),(0,r.Wv)(h,{key:1,type:"success"},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("已完成")]))),_:1})):(0,r.Q3)("",!0)]),(0,r.Lk)("span",Ve,"作者: "+(0,d.v_)(l.novel.author),1)]),(0,r.Lk)("p",Pe,(0,d.v_)(l.novel.description),1)]),(0,r.bF)(_,{modelValue:l.activeTab,"onUpdate:modelValue":t[2]||(t[2]=e=>l.activeTab=e),type:"border-card"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{label:"摘要分析",name:"summary"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Oe,[t[13]||(t[13]=(0,r.Lk)("h3",null,"总体摘要",-1)),(0,r.Lk)("div",xe,[(0,r.Lk)("p",null,(0,d.v_)(l.novel.overallSummary),1)]),t[14]||(t[14]=(0,r.Lk)("h3",null,"世界观设定",-1)),(0,r.Lk)("div",Ue,[(0,r.Lk)("p",null,(0,d.v_)(l.novel.worldBuildingSummary),1)]),t[15]||(t[15]=(0,r.Lk)("h3",null,"人物发展",-1)),(0,r.Lk)("div",We,[(0,r.Lk)("p",null,(0,d.v_)(l.novel.characterDevelopmentSummary),1)])])])),_:1}),(0,r.bF)(k,{label:"章节列表",name:"chapters"},{default:(0,r.k6)((()=>[l.showChaptersTable?((0,r.uX)(),(0,r.CE)("div",Me,[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(b,{data:l.novel.chapters,style:{width:"100%"},height:"450"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{prop:"chapterNumber",label:"章节",width:"80"}),(0,r.bF)(f,{prop:"title",label:"标题"}),(0,r.bF)(f,{label:"操作",width:"120",fixed:"right"},{default:(0,r.k6)((e=>[(0,r.bF)(c,{link:"",onClick:t=>l.viewChapterSummary(e.row)},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("查看摘要")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[E,l.chaptersLoading]])])):(0,r.Q3)("",!0)])),_:1}),(0,r.bF)(k,{label:"标签分析",name:"tags"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",ze,[t[17]||(t[17]=(0,r.Lk)("h3",null,"推荐特点",-1)),(0,r.Lk)("div",Ke,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getTagsByType("POSITIVE"),(e=>((0,r.uX)(),(0,r.Wv)(h,{key:e.id,type:"success",effect:"dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(e.name),1)])),_:2},1024)))),128))]),t[18]||(t[18]=(0,r.Lk)("h3",null,"潜在问题",-1)),(0,r.Lk)("div",Xe,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getTagsByType("WARNING"),(e=>((0,r.uX)(),(0,r.Wv)(h,{key:e.id,type:"warning",effect:"dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(e.name),1)])),_:2},1024)))),128))]),t[19]||(t[19]=(0,r.Lk)("h3",null,"阅读门槛",-1)),(0,r.Lk)("div",$e,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getTagsByType("INFO"),(e=>((0,r.uX)(),(0,r.Wv)(h,{key:e.id,type:"info",effect:"dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(e.name),1)])),_:2},1024)))),128))])])])),_:1}),(0,r.bF)(k,{label:"数据可视化",name:"visualization"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Be,[(0,r.Lk)("div",qe,[t[21]||(t[21]=(0,r.Lk)("h3",null,"数据可视化",-1)),(0,r.bF)(c,{type:"primary",onClick:l.navigateToVisualization,size:"small"},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(y)])),_:1}),t[20]||(t[20]=(0,r.eW)(" 查看完整可视化 "))])),_:1},8,["onClick"])]),(0,r.bF)(_,{modelValue:l.visualTab,"onUpdate:modelValue":t[1]||(t[1]=e=>l.visualTab=e),type:"card",class:"vis-tabs"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{label:"关键词云",name:"keywords"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",je,[t[22]||(t[22]=(0,r.Lk)("p",{class:"vis-description"},"该关键词云展示了小说中出现频率最高的关键词，词汇大小表示其在小说中的重要程度。",-1)),(0,r.bF)(w,{keywords:l.novel.keywords||[],title:"小说关键词分布",height:"400px"},null,8,["keywords"])])])),_:1}),(0,r.bF)(k,{label:"情节波动图",name:"plotTrend"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Ge,[t[23]||(t[23]=(0,r.Lk)("p",{class:"vis-description"},"情节波动图展示了小说情感和紧张度随章节的变化，帮助理解故事结构和节奏。",-1)),(0,r.bF)(F,{"plot-data":l.novel.plotTrendData||[],title:"情节波动趋势",height:"400px"},null,8,["plot-data"])])])),_:1}),(0,r.bF)(k,{label:"结构分析",name:"structure"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Qe,[t[24]||(t[24]=(0,r.Lk)("p",{class:"vis-description"},"小说结构分析图展示了小说各部分的比例和关系，帮助理解整体结构布局。",-1)),(0,r.bF)(L,{"structure-data":l.novel.structureData||{},title:"小说结构分析",height:"500px"},null,8,["structure-data"])])])),_:1})])),_:1},8,["modelValue"])])])),_:1})])),_:1},8,["modelValue"])])),(0,r.bF)(C,{modelValue:l.dialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>l.dialogVisible=e),title:"章节摘要",width:"50%","append-to-body":!0,"destroy-on-close":""},{footer:(0,r.k6)((()=>[(0,r.Lk)("span",Ye,[(0,r.bF)(c,{onClick:t[3]||(t[3]=e=>l.dialogVisible=!1)},{default:(0,r.k6)((()=>t[26]||(t[26]=[(0,r.eW)("关闭")]))),_:1}),(0,r.bF)(c,{type:"primary",onClick:t[4]||(t[4]=e=>l.dialogVisible=!1)},{default:(0,r.k6)((()=>t[27]||(t[27]=[(0,r.eW)("查看详情")]))),_:1})])])),default:(0,r.k6)((()=>[l.selectedChapter?((0,r.uX)(),(0,r.CE)("div",He,[(0,r.Lk)("h4",null,(0,d.v_)(l.selectedChapter.title),1),(0,r.Lk)("p",null,(0,d.v_)(l.selectedChapter.summary),1),t[25]||(t[25]=(0,r.Lk)("h5",null,"关键词",-1)),(0,r.Lk)("div",Je,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.selectedChapter.keywords,(e=>((0,r.uX)(),(0,r.Wv)(h,{key:e,size:"small"},{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(e),1)])),_:2},1024)))),128))])])):(0,r.Q3)("",!0)])),_:1},8,["modelValue"])])}a(8111),a(2489);const et={async getNovelList(){return H.A.get("/novels")},async getNovelDetail(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/${e}`)},async getNovelStatus(e){if(!e)throw new Error("小说ID不能为空");try{return await H.A.get(`/novels/${e}/status`)}catch(t){if(t.response&&404===t.response.status)return{status:"NOT_FOUND",error:`小说不存在: ${e}`,processedChapters:0,totalChapters:0};throw t}},async uploadNovel(e){const t={"Content-Type":"multipart/form-data"};return H.A.post("/novels/upload",e,{headers:t})},async getSummaryAnalysis(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/${e}/summary`)},async getChapterList(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/${e}/chapters`)},async getTagAnalysis(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/${e}/tags`)},async getVisualizations(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/${e}/visualizations`)}};var tt=et;const at={getKeywordCloudData(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/visualization/${e}/keywords`)},getEmotionalFluctuationData(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/visualization/${e}/emotional`)},getStructureAnalysisData(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/visualization/${e}/structure`)},getCharacterRelationshipData(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/visualization/${e}/characters`)},getSceneDistributionData(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/visualization/${e}/scenes`)},getNovelStatisticsData(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/visualization/${e}/statistics`)},getAllVisualizationData(e){if(!e)throw new Error("小说ID不能为空");return H.A.get(`/novels/visualization/${e}/all`)}};var lt=at;const rt={class:"chart-container"},ot={key:0,class:"loading-overlay"},nt={key:1,class:"no-data-message"};function st(e,t,a,l,o,n){return(0,r.uX)(),(0,r.CE)("div",rt,[a.loading?((0,r.uX)(),(0,r.CE)("div",ot,t[0]||(t[0]=[(0,r.Lk)("div",{class:"loading-spinner"},null,-1),(0,r.Lk)("div",{class:"loading-text"},"加载中...",-1)]))):l.hasData?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",nt,t[1]||(t[1]=[(0,r.Lk)("i",{class:"el-icon-warning-outline"},null,-1),(0,r.Lk)("p",null,"暂无关键词数据",-1)]))),(0,r.Lk)("div",{ref:"chartRef",class:"keyword-cloud-chart",style:(0,d.Tr)({opacity:l.hasData?1:0})},null,4)])}a(1701);var it=a(7808);a(3251);const ut={name:"KeywordCloud",props:{keywords:{type:Array,required:!0,default:()=>[]},title:{type:String,default:"关键词云"},height:{type:String,default:"400px"},width:{type:String,default:"100%"},loading:{type:Boolean,default:!1}},setup(e){const t=(0,we.KR)(null);let a=null;const l=(0,r.EW)((()=>e.keywords&&e.keywords.length>0)),o=()=>{if(!t.value)return;if(a&&a.dispose(),a=it.init(t.value),!l.value)return;const r={title:{text:e.title,left:"center",textStyle:{fontWeight:"normal",fontSize:16}},tooltip:{show:!0,formatter:function(e){return e.data.name+": "+e.data.value},backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#ccc",borderWidth:0,padding:[5,10],textStyle:{color:"#fff"}},series:[{type:"wordCloud",shape:"circle",left:"center",top:"center",width:"90%",height:"90%",right:null,bottom:null,sizeRange:[12,60],rotationRange:[-60,60],rotationStep:15,gridSize:8,drawOutOfBound:!1,layoutAnimation:!0,textStyle:{fontFamily:"sans-serif",fontWeight:"bold",color:function(){return"rgb("+[Math.round(100*Math.random()+80),Math.round(140*Math.random()+60),Math.round(180*Math.random()+40)].join(",")+")"}},emphasis:{focus:"self",textStyle:{shadowBlur:10,shadowColor:"#333"}},data:n(e.keywords)}]};a.setOption(r),window.addEventListener("resize",s)},n=e=>e&&e.length?e.map((e=>"string"===typeof e?{name:e,value:Math.floor(90*Math.random())+10}:"object"===typeof e?{name:e.word||e.name||e.keyword||"",value:e.weight||e.value||e.count||Math.floor(90*Math.random())+10}:{name:"",value:0})).filter((e=>e.name)):[],s=()=>{a&&a.resize()};return(0,r.wB)((()=>e.keywords),(e=>{a?a.setOption({series:[{data:n(e)}]}):o()}),{deep:!0}),(0,r.wB)((()=>e.loading),(e=>{e||a||!t.value||o()})),(0,r.sV)((()=>{e.loading||setTimeout(o,0)})),(0,r.xo)((()=>{a&&(a.dispose(),a=null),window.removeEventListener("resize",s)})),{chartRef:t,hasData:l,chart:a}}},ct=()=>{(0,l.$9)((e=>({"6d1b1a0e":e.width,"4b0cf254":e.height})))},dt=ut.setup;ut.setup=dt?(e,t)=>(ct(),dt(e,t)):ct;var mt=ut;const pt=(0,_.A)(mt,[["render",st],["__scopeId","data-v-7108beb4"]]);var gt=pt;const vt={class:"chart-container"},ht={key:0,class:"loading-overlay"},kt={key:1,class:"no-data-message"};function ft(e,t,a,l,o,n){return(0,r.uX)(),(0,r.CE)("div",vt,[a.loading?((0,r.uX)(),(0,r.CE)("div",ht,t[0]||(t[0]=[(0,r.Lk)("div",{class:"loading-spinner"},null,-1),(0,r.Lk)("div",{class:"loading-text"},"加载中...",-1)]))):l.hasData?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",kt,t[1]||(t[1]=[(0,r.Lk)("i",{class:"el-icon-warning-outline"},null,-1),(0,r.Lk)("p",null,"暂无情节波动数据",-1)]))),(0,r.Lk)("div",{ref:"chartRef",class:"plot-trend-chart",style:(0,d.Tr)({opacity:l.hasData?1:0})},null,4)])}a(7588);const bt={name:"PlotTrendChart",props:{plotData:{type:Array,required:!0,default:()=>[]},title:{type:String,default:"情节波动图"},height:{type:String,default:"400px"},width:{type:String,default:"100%"},loading:{type:Boolean,default:!1}},setup(e){const t=(0,we.KR)(null);let a=null;const l=(0,r.EW)((()=>e.plotData&&e.plotData.length>0)),o=()=>{if(!t.value)return;if(a&&a.dispose(),a=it.init(t.value),!l.value)return;const r=n(e.plotData),o={title:{text:e.title,left:"center",textStyle:{fontWeight:"normal",fontSize:16}},tooltip:{trigger:"axis",formatter:function(e){const t=e[0].dataIndex,a=r.tooltips[t]||{};let l=`章节 ${e[0].name}<br/>`;return l+=`情感波动值: ${e[0].value.toFixed(1)}<br/>`,a.event&&(l+=`<strong>关键事件:</strong> ${a.event}<br/>`),l},backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#ccc",borderWidth:0,padding:[5,10],textStyle:{color:"#fff"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:r.chapters,axisLabel:{interval:Math.floor(r.chapters.length/10),rotate:r.chapters.length>20?30:0}},yAxis:{type:"value",name:"情感强度",min:function(e){return Math.floor(1.1*e.min)},max:function(e){return Math.ceil(1.1*e.max)},splitLine:{lineStyle:{type:"dashed",opacity:.6}}},series:[{name:"情感变化",type:"line",smooth:!0,animationDuration:2e3,animationEasing:"quadraticOut",lineStyle:{width:3,shadowColor:"rgba(0,0,0,0.3)",shadowBlur:10,shadowOffsetY:8},markPoint:{symbolSize:45,data:[{type:"max",name:"最高点"},{type:"min",name:"最低点"}]},markArea:{itemStyle:{color:"rgba(255, 173, 177, 0.2)"},data:r.markAreas},markLine:{symbol:"none",lineStyle:{type:"dashed"},data:r.markLines},areaStyle:{color:new it.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(58, 77, 233, 0.8)"},{offset:1,color:"rgba(58, 77, 233, 0.1)"}])},data:r.emotionValues}]};a.setOption(o),window.addEventListener("resize",s)},n=e=>{if(!e||!e.length)return{chapters:[],emotionValues:[],tooltips:[],markLines:[],markAreas:[]};const t=[],a=[],l=[],r=[],o=[];return e.forEach(((n,s)=>{const i=n.chapterNumber||n.chapter||`第${s+1}章`;t.push(i);const u=n.emotion||n.emotionValue||n.tension||0;if(a.push(u),l.push({event:n.event||n.keyEvent||n.summary||"",emotion:u}),(n.isImportant||n.isKey||n.isCritical)&&r.push({xAxis:s,label:{formatter:"重要事件",position:"middle"}}),n.isClimaxStart&&s<e.length-1){let t=e.findIndex(((e,t)=>t>s&&e.isClimaxEnd));-1===t&&(t=Math.min(s+3,e.length-1)),o.push([{xAxis:s},{xAxis:t}])}})),{chapters:t,emotionValues:a,tooltips:l,markLines:r,markAreas:o}},s=()=>{a&&a.resize()};return(0,r.wB)((()=>e.plotData),(e=>{if(a){const t=n(e);a.setOption({xAxis:{data:t.chapters},series:[{data:t.emotionValues,markArea:{data:t.markAreas},markLine:{data:t.markLines}}]})}else t.value&&l.value&&o()}),{deep:!0}),(0,r.wB)((()=>e.loading),(e=>{!e&&!a&&t.value&&l.value&&o()})),(0,r.sV)((()=>{!e.loading&&l.value&&setTimeout(o,0)})),(0,r.xo)((()=>{a&&(a.dispose(),a=null),window.removeEventListener("resize",s)})),{chartRef:t,hasData:l,chart:a}}},yt=()=>{(0,l.$9)((e=>({"53eae626":e.width,"0fa2e4c7":e.height})))},wt=bt.setup;bt.setup=wt?(e,t)=>(yt(),wt(e,t)):yt;var Ft=bt;const Lt=(0,_.A)(Ft,[["render",ft],["__scopeId","data-v-0a5ae585"]]);var _t=Lt;const Ct={class:"chart-container"},Et={ref:"chartRef",class:"structure-chart"};function St(e,t,a,l,o,n){return(0,r.uX)(),(0,r.CE)("div",Ct,[(0,r.Lk)("div",Et,null,512)])}a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const At={name:"StructureAnalysisChart",props:{structureData:{type:Object,required:!0,default:()=>({})},title:{type:String,default:"小说结构分析"},height:{type:String,default:"500px"},width:{type:String,default:"100%"}},setup(e){const t=(0,we.KR)(null);let a=null;const l=()=>{if(!t.value)return;a=it.init(t.value);const l=o(e.structureData),r={title:{text:e.title,left:"center",top:0},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",data:l.legendData},series:[{name:"章节分布",type:"pie",selectedMode:"single",radius:[0,"40%"],label:{position:"inner",fontSize:14},labelLine:{show:!1},data:l.mainData},{name:"详细结构",type:"pie",radius:["50%","70%"],labelLine:{length:30},label:{formatter:"{a|{a}}{abg|}\n{hr|}\n  {b|{b}：}{c}  {per|{d}%}  ",backgroundColor:"#F6F8FC",borderColor:"#8C8D8E",borderWidth:1,borderRadius:4,rich:{a:{color:"#6E7079",lineHeight:22,align:"center"},hr:{borderColor:"#8C8D8E",width:"100%",borderWidth:1,height:0},b:{color:"#4C5058",fontSize:14,fontWeight:"bold",lineHeight:33},per:{color:"#fff",backgroundColor:"#4C5058",padding:[3,4],borderRadius:4}}},data:l.detailData}]};a.setOption(r),window.addEventListener("resize",s),a.on("click",(e=>{1===e.seriesIndex&&n(e.data)}))},o=e=>{if(!e||0===Object.keys(e).length)return{mainData:[],detailData:[],legendData:[]};const t=[],a=[],l=[],r=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"];if(e.mainStructure&&Array.isArray(e.mainStructure))e.mainStructure.forEach(((e,a)=>{t.push({name:e.name,value:e.value||e.chapterCount||1,itemStyle:{color:e.color||r[a%r.length]}}),l.push(e.name)}));else{const e=[{name:"开端",value:1,color:"#5470c6"},{name:"铺垫",value:2,color:"#91cc75"},{name:"发展",value:3,color:"#fac858"},{name:"高潮",value:2,color:"#ee6666"},{name:"结局",value:1,color:"#73c0de"}];e.forEach((e=>{t.push({name:e.name,value:e.value,itemStyle:{color:e.color}}),l.push(e.name)}))}if(e.detailStructure&&Array.isArray(e.detailStructure))e.detailStructure.forEach(((e,t)=>{a.push({name:e.name,value:e.value||e.chapterCount||1,itemStyle:{color:e.color||r[t%r.length]},description:e.description||"",chapters:e.chapters||[]}),l.push(e.name)}));else{const e=[{name:"角色介绍",value:1},{name:"世界设定",value:1},{name:"初始冲突",value:1},{name:"情节递进",value:2},{name:"次要冲突",value:1},{name:"关系发展",value:1},{name:"主要冲突",value:1},{name:"危机",value:1},{name:"转折点",value:1},{name:"高潮",value:1},{name:"解决",value:1},{name:"结局",value:1}];e.forEach(((e,t)=>{a.push({name:e.name,value:e.value,description:"",chapters:[]}),l.push(e.name)}))}const o=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de"];return a.forEach(((e,t)=>{e.color=o[t%o.length]})),{mainData:t,detailData:a,legendData:[...new Set(l)]}},n=e=>{e&&console.log("显示结构部分详情:",e)},s=()=>{a&&a.resize()};return(0,r.wB)((()=>e.structureData),(e=>{if(a){const t=o(e);a.setOption({legend:{data:t.legendData},series:[{data:t.mainData},{data:t.detailData}]})}}),{deep:!0}),(0,r.sV)((()=>{setTimeout(l,0)})),(0,r.xo)((()=>{a&&(a.dispose(),a=null),window.removeEventListener("resize",s)})),{chartRef:t,chart:a}}},Tt=()=>{(0,l.$9)((e=>({"38bb667a":e.width,"76d851ca":e.height})))},Dt=At.setup;At.setup=Dt?(e,t)=>(Tt(),Dt(e,t)):Tt;var Rt=At;const It=(0,_.A)(Rt,[["render",St],["__scopeId","data-v-277742f0"]]);var Nt=It,Vt={name:"NovelDetailView",components:{InfoFilled:F.N_H,FullScreen:F.mcU,KeywordCloud:gt,PlotTrendChart:_t,StructureAnalysisChart:Nt},setup(){const e=(0,w.lq)(),t=(0,w.rd)(),a=(0,we.KR)(!0),l=(0,we.KR)(null),o=(0,we.KR)(!1),n=(0,we.KR)(null),s=(0,we.KR)("summary"),i=(0,we.KR)("keywords"),u=(0,we.KR)(!1),c=(0,we.KR)(!1),d=(0,we.KR)(null),m=(0,r.EW)((()=>Number(e.params.id))),p=(0,r.EW)((()=>"true"===e.query.demo||"demo"===e.query.mode)),g=e=>d.value&&d.value.tags?d.value.tags.filter((t=>t.type===e)):[],v=async()=>{try{if(a.value=!0,l.value=null,!m.value)return void(l.value="未指定小说ID");p.value&&await new Promise((e=>setTimeout(e,1e3)));const t=await tt.getNovelDetail(m.value);if(d.value=t,d.value&&"COMPLETED"===d.value.processingStatus)try{const e=await lt.getAllVisualizationData(m.value);d.value={...d.value,keywords:e.keywords||[],plotTrendData:e.emotional||[],structureData:e.structure||{}}}catch(e){console.warn("获取可视化数据失败:",e),d.value.keywords=h(),d.value.plotTrendData=k(),d.value.structureData=f()}else p.value&&(d.value.keywords=h(),d.value.plotTrendData=k(),d.value.structureData=f())}catch(t){console.error("获取小说详情失败:",t),l.value="获取小说详情失败，请稍后重试"}finally{a.value=!1}},h=()=>[{name:"主角",value:100},{name:"爱情",value:85},{name:"冒险",value:70},{name:"战斗",value:65},{name:"友情",value:62},{name:"背叛",value:58},{name:"成长",value:54},{name:"复仇",value:52},{name:"魔法",value:50},{name:"宿命",value:48},{name:"奇幻",value:45},{name:"阴谋",value:40},{name:"正义",value:38},{name:"邪恶",value:35},{name:"王国",value:32},{name:"家族",value:30},{name:"战争",value:28},{name:"和平",value:25},{name:"勇气",value:22},{name:"智慧",value:20},{name:"牺牲",value:18},{name:"羁绊",value:16},{name:"命运",value:15},{name:"生死",value:12},{name:"传说",value:10}],k=()=>{const e=[];for(let t=1;t<=30;t++){let a=0;a=t<5?20+10*Math.random():t<10?30+5*(t-5)+10*Math.random():t<15?50+20*Math.sin(.8*(t-10))+10*Math.random():t<20?40+15*Math.sin(.5*(t-15))+15*Math.random():t<25?50+8*(t-20)+10*Math.random():90-6*(t-25)+10*Math.random();const l=14===t||24===t,r=22===t,o=27===t;e.push({chapterNumber:`第${t}章`,emotion:Math.round(a),isImportant:l,isClimaxStart:r,isClimaxEnd:o,event:l?`章节${t}关键事件`:""})}return e},f=()=>({mainStructure:[{name:"开端",value:5,color:"#5470c6"},{name:"铺垫",value:7,color:"#91cc75"},{name:"发展",value:10,color:"#fac858"},{name:"高潮",value:5,color:"#ee6666"},{name:"结局",value:3,color:"#73c0de"}],detailStructure:[{name:"角色介绍",value:2,color:"#5470c6"},{name:"世界设定",value:3,color:"#91cc75"},{name:"初始冲突",value:2,color:"#6492ed"},{name:"情节递进",value:5,color:"#fac858"},{name:"次要冲突",value:3,color:"#ee6666"},{name:"关系发展",value:4,color:"#a065d5"},{name:"主要冲突",value:3,color:"#73c0de"},{name:"危机",value:2,color:"#3ba272"},{name:"转折点",value:1,color:"#fc8452"},{name:"高潮",value:3,color:"#9a60b4"},{name:"解决",value:2,color:"#ea7ccc"},{name:"结局",value:1,color:"#457fd6"}]}),b=e=>{n.value=e,setTimeout((()=>{o.value=!0}),50)};(0,r.wB)(s,(e=>{"chapters"!==e||u.value||(c.value=!0,setTimeout((()=>{u.value=!0,c.value=!1}),100))}));const y=()=>{console.log("Navigating to visualization for novel:",d.value.id),t.push({name:"novel-visualization",params:{id:d.value.id||"1"}})};return(0,r.sV)((()=>{v()})),{novel:d,loading:a,error:l,fetchData:v,dialogVisible:o,selectedChapter:n,viewChapterSummary:b,activeTab:s,visualTab:i,showChaptersTable:u,chaptersLoading:c,getTagsByType:g,isDemo:p,navigateToVisualization:y}}};const Pt=(0,_.A)(Vt,[["render",Ze],["__scopeId","data-v-45849510"]]);var Ot=Pt;const xt={class:"upload-container"},Ut={class:"upload-area"},Wt={class:"upload-form"},Mt={class:"url-form"},zt={class:"upload-actions"},Kt={class:"dialog-footer"};function Xt(e,t,a,l,o,n){const s=(0,r.g2)("upload-filled"),i=(0,r.g2)("el-icon"),u=(0,r.g2)("el-upload"),c=(0,r.g2)("el-input"),d=(0,r.g2)("el-form-item"),m=(0,r.g2)("el-form"),p=(0,r.g2)("el-tab-pane"),g=(0,r.g2)("el-tabs"),v=(0,r.g2)("el-button"),h=(0,r.g2)("el-dialog");return(0,r.uX)(),(0,r.CE)("div",xt,[t[16]||(t[16]=(0,r.Lk)("h1",null,"上传小说",-1)),t[17]||(t[17]=(0,r.Lk)("p",{class:"description"},"上传小说文件或输入小说链接，系统将自动分析内容并生成摘要、标签等",-1)),(0,r.bF)(g,{modelValue:e.activeTab,"onUpdate:modelValue":t[5]||(t[5]=t=>e.activeTab=t)},{default:(0,r.k6)((()=>[(0,r.bF)(p,{label:"本地文件上传",name:"file"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Ut,[(0,r.bF)(u,{class:"upload-dragger",drag:"",action:"","auto-upload":!1,"on-change":e.handleFileChange,limit:1,"file-list":e.fileList,multiple:!1,ref:"uploadRef"},{tip:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.Lk)("div",{class:"el-upload__tip"}," 支持 TXT、EPUB 格式的小说文件，文件大小不超过 20MB ",-1)]))),default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(s)])),_:1}),t[9]||(t[9]=(0,r.Lk)("div",{class:"el-upload__text"},[(0,r.eW)("拖拽文件到此处或 "),(0,r.Lk)("em",null,"点击上传")],-1))])),_:1},8,["on-change","file-list"])]),(0,r.Lk)("div",Wt,[(0,r.bF)(m,{model:e.uploadForm,"label-width":"100px"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{label:"小说标题",required:""},{default:(0,r.k6)((()=>[(0,r.bF)(c,{modelValue:e.uploadForm.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.uploadForm.title=t),placeholder:"请输入小说标题"},null,8,["modelValue"])])),_:1}),(0,r.bF)(d,{label:"作者"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{modelValue:e.uploadForm.author,"onUpdate:modelValue":t[1]||(t[1]=t=>e.uploadForm.author=t),placeholder:"请输入作者名（可选）"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1}),(0,r.bF)(p,{label:"网页链接解析",name:"url"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Mt,[(0,r.bF)(m,{model:e.urlForm,"label-width":"100px"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{label:"小说链接",required:""},{default:(0,r.k6)((()=>[(0,r.bF)(c,{modelValue:e.urlForm.url,"onUpdate:modelValue":t[2]||(t[2]=t=>e.urlForm.url=t),placeholder:"请输入小说目录页链接"},null,8,["modelValue"]),t[10]||(t[10]=(0,r.Lk)("div",{class:"form-tip"}," 支持主流小说网站，请确保链接指向小说目录页或章节页 ",-1))])),_:1}),(0,r.bF)(d,{label:"小说标题",required:""},{default:(0,r.k6)((()=>[(0,r.bF)(c,{modelValue:e.urlForm.title,"onUpdate:modelValue":t[3]||(t[3]=t=>e.urlForm.title=t),placeholder:"请输入小说标题"},null,8,["modelValue"])])),_:1}),(0,r.bF)(d,{label:"作者"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{modelValue:e.urlForm.author,"onUpdate:modelValue":t[4]||(t[4]=t=>e.urlForm.author=t),placeholder:"请输入作者名（可选）"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1})])),_:1},8,["modelValue"]),(0,r.Lk)("div",zt,[(0,r.bF)(v,{onClick:e.goBack},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("取消")]))),_:1},8,["onClick"]),(0,r.bF)(v,{type:"primary",onClick:e.handleSubmit,loading:e.loading},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("开始分析")]))),_:1},8,["onClick","loading"])]),(0,r.bF)(h,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=t=>e.dialogVisible=t),title:"版权提醒",width:"30%"},{footer:(0,r.k6)((()=>[(0,r.Lk)("span",Kt,[(0,r.bF)(v,{onClick:t[6]||(t[6]=t=>e.dialogVisible=!1)},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("取消")]))),_:1}),(0,r.bF)(v,{type:"primary",onClick:e.confirmUpload},{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.eW)("确认上传")]))),_:1},8,["onClick"])])])),default:(0,r.k6)((()=>[t[15]||(t[15]=(0,r.Lk)("span",null,"请确保您有合法权利使用上传的小说内容，本工具仅供个人学习和研究使用，请勿用于侵犯版权的目的。",-1))])),_:1},8,["modelValue"])])}var $t=(0,r.pM)({name:"UploadView",components:{UploadFilled:F.m8m},setup(){const e=(0,w.rd)(),t=(0,s.Pj)(),a=(0,we.KR)("file"),l=(0,we.KR)(null),r=(0,we.KR)([]),o=(0,we.Kh)({title:"",author:""}),n=(0,we.Kh)({url:"",title:"",author:""}),i=(0,we.KR)(!1),c=(0,we.KR)(!1),d=()=>{e.push("/")},m=(e,t)=>{if(r.value=t,e&&e.name&&!o.title){const t=e.name.replace(/\.(txt|epub)$/i,"");o.title=t}},p=()=>{if("file"===a.value){if(!r.value||0===r.value.length)return void u.nk.warning("请上传小说文件");if(!o.title)return void u.nk.warning("请输入小说标题");c.value=!0}else{if(!n.url)return void u.nk.warning("请输入小说链接");if(!n.title)return void u.nk.warning("请输入小说标题");c.value=!0}},g=async()=>{c.value=!1,i.value=!0;try{let l=new FormData;if("file"===a.value){if(!r.value||0===r.value.length)throw new Error("未找到上传文件");const e=r.value[0];if(!e||!e.raw)throw new Error("无法获取文件对象，请重新选择文件");l.append("file",e.raw),l.append("title",o.title),o.author&&l.append("author",o.author)}else l.append("url",n.url),l.append("title",n.title),n.author&&l.append("author",n.author);await t.dispatch("uploadNovel",l),u.nk.success("提交成功，正在处理中..."),e.push("/analyze")}catch(l){u.nk.error("提交失败，请重试: "+(l.message||"未知错误"))}finally{i.value=!1}};return{activeTab:a,uploadRef:l,fileList:r,uploadForm:o,urlForm:n,loading:i,dialogVisible:c,goBack:d,handleFileChange:m,handleSubmit:p,confirmUpload:g}}});const Bt=(0,_.A)($t,[["render",Xt],["__scopeId","data-v-e51b905a"]]);var qt=Bt;const jt={class:"analyze-container"},Gt={class:"progress-info"},Qt={class:"status-text"},Ht={key:0,class:"details-container"},Jt={class:"detail-item"},Yt={class:"detail-item"},Zt={key:1,class:"error-container"},ea={key:0,class:"action-buttons"};function ta(e,t,a,l,o,n){const s=(0,r.g2)("el-progress"),i=(0,r.g2)("el-alert"),u=(0,r.g2)("el-button"),c=(0,r.g2)("el-card");return(0,r.uX)(),(0,r.CE)("div",jt,[(0,r.bF)(c,{class:"analyze-card"},{header:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h2",null,"小说处理中")],-1)]))),default:(0,r.k6)((()=>[(0,r.Lk)("div",Gt,[(0,r.bF)(s,{percentage:l.percentage,status:l.progressStatus},null,8,["percentage","status"]),(0,r.Lk)("p",Qt,(0,d.v_)(l.statusText),1),"FAILED"!==l.processingStatus?((0,r.uX)(),(0,r.CE)("div",Ht,[(0,r.Lk)("div",Jt,[t[1]||(t[1]=(0,r.Lk)("h4",null,"处理章节",-1)),(0,r.Lk)("p",null,(0,d.v_)(l.currentChapter)+" / "+(0,d.v_)(l.totalChapters),1)]),(0,r.Lk)("div",Yt,[t[2]||(t[2]=(0,r.Lk)("h4",null,"预计完成时间",-1)),(0,r.Lk)("p",null,(0,d.v_)(l.estimatedTime),1)])])):(0,r.Q3)("",!0),"FAILED"===l.processingStatus?((0,r.uX)(),(0,r.CE)("div",Zt,[(0,r.bF)(i,{title:"处理失败",type:"error",description:"小说处理过程中出现错误，请重试或联系客服。","show-icon":""}),(0,r.bF)(u,{type:"primary",onClick:l.retry,class:"retry-btn"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("重新尝试")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0)]),"COMPLETED"===l.processingStatus?((0,r.uX)(),(0,r.CE)("div",ea,[(0,r.bF)(u,{type:"primary",onClick:l.viewResults},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("查看分析结果")]))),_:1},8,["onClick"]),(0,r.bF)(u,{onClick:l.backToHome},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("返回首页")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0)])),_:1})])}var aa={name:"AnalyzeView",setup(){const e=(0,s.Pj)(),t=(0,w.rd)(),a=(0,r.EW)((()=>e.state.processingStatus||"PROCESSING")),l=(0,r.EW)((()=>e.getters.processingPercentage)),o=(0,we.KR)(0),n=(0,we.KR)(10),i=(0,we.KR)("约1-2分钟"),u=(0,r.EW)((()=>{switch(a.value){case"UPLOADING":return"正在上传小说文件...";case"PROCESSING":return"正在分析小说内容...";case"COMPLETED":return"分析完成！";case"FAILED":return"处理失败";default:return"准备中..."}})),c=(0,r.EW)((()=>"COMPLETED"===a.value?"success":"FAILED"===a.value?"exception":""));let d=null;(0,r.sV)((()=>{const e=new URLSearchParams(window.location.search),t=e.get("id")||3;m(t)})),(0,r.xo)((()=>{d&&clearInterval(d)}));const m=t=>{t?d=setInterval((async()=>{try{const a=await tt.getNovelStatus(t);e.commit("SET_PROCESSING_STATUS",a.status.toUpperCase()),a.totalChapters&&(n.value=a.totalChapters),a.processedChapters&&(o.value=a.processedChapters),"COMPLETED"!==a.status&&"FAILED"!==a.status||clearInterval(d)}catch(a){console.error("获取处理状态失败",a)}}),2e3):console.warn("没有提供novelId，无法进行状态轮询")},p=()=>{const e=new URLSearchParams(window.location.search),a=e.get("id")||3;t.push({name:"novel-detail",params:{id:a}})},g=()=>{t.push({name:"home"})},v=()=>{e.commit("SET_PROCESSING_STATUS","PROCESSING"),o.value=0;const t=new URLSearchParams(window.location.search),a=t.get("id")||3;m(a)};return{processingStatus:a,percentage:l,currentChapter:o,totalChapters:n,estimatedTime:i,statusText:u,progressStatus:c,viewResults:p,backToHome:g,retry:v}}};const la=(0,_.A)(aa,[["render",ta],["__scopeId","data-v-60e20bbe"]]);var ra=la;const oa={class:"login-container"},na={class:"login-card"},sa={class:"login-actions"},ia={class:"register-link"};function ua(e,t,a,l,o,n){const s=(0,r.g2)("el-alert"),i=(0,r.g2)("user"),u=(0,r.g2)("el-icon"),c=(0,r.g2)("el-input"),d=(0,r.g2)("el-form-item"),m=(0,r.g2)("lock"),p=(0,r.g2)("el-checkbox"),g=(0,r.g2)("el-link"),v=(0,r.g2)("el-button"),h=(0,r.g2)("router-link"),k=(0,r.g2)("el-form");return(0,r.uX)(),(0,r.CE)("div",oa,[(0,r.Lk)("div",na,[t[9]||(t[9]=(0,r.Lk)("div",{class:"login-header"},[(0,r.Lk)("h2",null,"登录"),(0,r.Lk)("p",null,"欢迎回来！登录您的账户以继续使用小说智析。")],-1)),(0,r.bF)(k,{ref:"loginFormRef",model:l.loginForm,rules:l.loginRules,"label-position":"top"},{default:(0,r.k6)((()=>[l.errorMessage?((0,r.uX)(),(0,r.Wv)(s,{key:0,title:l.errorMessage,type:"error","show-icon":"",closable:!0,onClose:t[0]||(t[0]=e=>l.errorMessage=""),class:"login-alert"},null,8,["title"])):(0,r.Q3)("",!0),(0,r.bF)(d,{label:"用户名",prop:"username"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{modelValue:l.loginForm.username,"onUpdate:modelValue":t[1]||(t[1]=e=>l.loginForm.username=e),placeholder:"请输入用户名",clearable:""},{prefix:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(i)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(d,{label:"密码",prop:"password"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{modelValue:l.loginForm.password,"onUpdate:modelValue":t[2]||(t[2]=e=>l.loginForm.password=e),placeholder:"请输入密码",type:"password","show-password":"",clearable:""},{prefix:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(m)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,r.Lk)("div",sa,[(0,r.bF)(p,{modelValue:l.rememberMe,"onUpdate:modelValue":t[3]||(t[3]=e=>l.rememberMe=e)},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("记住我")]))),_:1},8,["modelValue"]),(0,r.bF)(g,{type:"primary",underline:!1},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("忘记密码?")]))),_:1})]),(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(v,{type:"primary",class:"login-button",loading:l.loading,onClick:l.handleLogin},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)(" 登录 ")]))),_:1},8,["loading","onClick"])])),_:1}),(0,r.Lk)("div",ia,[t[8]||(t[8]=(0,r.Lk)("span",null,"还没有账号?",-1)),(0,r.bF)(h,{to:"/register"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)("立即注册")]))),_:1})])])),_:1},8,["model","rules"])])])}var ca={name:"LoginView",components:{User:F.KJW,Lock:F.c_I},setup(){const e=(0,s.Pj)(),t=(0,w.rd)(),a=(0,w.lq)(),l=(0,we.KR)(null),r=(0,we.Kh)({username:"",password:""}),o=(0,we.KR)(!1),n=(0,we.KR)(!1),i=(0,we.KR)(""),c={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在3-20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:40,message:"密码长度应在6-40个字符之间",trigger:"blur"}]},d=()=>{l.value.validate((l=>{if(!l)return!1;{n.value=!0,i.value="";const l={username:r.username,password:r.password};e.dispatch("auth/login",l).then((()=>{u.nk.success("登录成功!");const l=e.getters["auth/currentUser"],r=a.query.redirect;l&&l.roles?r?t.push(r):l.roles.includes("ROLE_ADMIN")?t.push("/admin/dashboard"):t.push("/"):t.push(r||"/")})).catch((e=>{if(console.log("登录界面捕获到错误:",e),e.isDisabledAccount||e.message&&e.message.includes("禁用"))i.value="账号已被禁用，请联系管理员";else if(e.response&&401===e.response.status)i.value="用户名或密码错误";else{if(e.response&&e.response.data){const t=e.response.data;let a="";if("string"===typeof t?a=t:t.message?a=t.message:t.error&&(a=t.error),a)return void(i.value=a)}i.value="登录失败，请稍后再试",console.error("登录失败:",e)}})).finally((()=>{n.value=!1}))}}))};return{loginForm:r,loginRules:c,rememberMe:o,loading:n,errorMessage:i,handleLogin:d,loginFormRef:l}}};const da=(0,_.A)(ca,[["render",ua],["__scopeId","data-v-2b399103"]]);var ma=da;const pa={class:"register-container"},ga={class:"register-card"},va={class:"agreement"},ha={class:"login-link"};function ka(e,t,a,l,o,n){const s=(0,r.g2)("el-alert"),i=(0,r.g2)("el-input"),u=(0,r.g2)("el-form-item"),c=(0,r.g2)("el-link"),d=(0,r.g2)("el-checkbox"),m=(0,r.g2)("el-button"),p=(0,r.g2)("router-link"),g=(0,r.g2)("el-form");return(0,r.uX)(),(0,r.CE)("div",pa,[(0,r.Lk)("div",ga,[t[13]||(t[13]=(0,r.Lk)("div",{class:"register-header"},[(0,r.Lk)("h2",null,"注册账号"),(0,r.Lk)("p",null,"加入小说智析，开始您的阅读之旅。")],-1)),(0,r.bF)(g,{ref:"registerFormRef",model:l.registerForm,rules:l.registerRules,"label-position":"top"},{default:(0,r.k6)((()=>[l.errorMessage?((0,r.uX)(),(0,r.Wv)(s,{key:0,title:l.errorMessage,type:"error","show-icon":"",closable:!0,onClose:t[0]||(t[0]=e=>l.errorMessage=""),class:"register-alert"},null,8,["title"])):(0,r.Q3)("",!0),l.successMessage?((0,r.uX)(),(0,r.Wv)(s,{key:1,title:l.successMessage,type:"success","show-icon":"",closable:!0,onClose:t[1]||(t[1]=e=>l.successMessage=""),class:"register-alert"},null,8,["title"])):(0,r.Q3)("",!0),(0,r.bF)(u,{label:"用户名",prop:"username"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:l.registerForm.username,"onUpdate:modelValue":t[2]||(t[2]=e=>l.registerForm.username=e),"prefix-icon":"el-icon-user",placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.bF)(u,{label:"电子邮箱",prop:"email"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:l.registerForm.email,"onUpdate:modelValue":t[3]||(t[3]=e=>l.registerForm.email=e),"prefix-icon":"el-icon-message",placeholder:"请输入电子邮箱",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.bF)(u,{label:"昵称",prop:"nickname"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:l.registerForm.nickname,"onUpdate:modelValue":t[4]||(t[4]=e=>l.registerForm.nickname=e),"prefix-icon":"el-icon-s-custom",placeholder:"请输入昵称（可选）",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.bF)(u,{label:"密码",prop:"password"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:l.registerForm.password,"onUpdate:modelValue":t[5]||(t[5]=e=>l.registerForm.password=e),"prefix-icon":"el-icon-lock",placeholder:"请输入密码",type:"password","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.bF)(u,{label:"确认密码",prop:"confirmPassword"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:l.registerForm.confirmPassword,"onUpdate:modelValue":t[6]||(t[6]=e=>l.registerForm.confirmPassword=e),"prefix-icon":"el-icon-lock",placeholder:"请再次输入密码",type:"password","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.Lk)("div",va,[(0,r.bF)(d,{modelValue:l.agreement,"onUpdate:modelValue":t[7]||(t[7]=e=>l.agreement=e)},{default:(0,r.k6)((()=>[t[9]||(t[9]=(0,r.eW)("我已阅读并同意")),(0,r.bF)(c,{type:"primary",underline:!1},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("服务条款")]))),_:1})])),_:1},8,["modelValue"])]),(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(m,{type:"primary",class:"register-button",loading:l.loading,onClick:l.handleRegister,disabled:!l.agreement},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.eW)(" 注册 ")]))),_:1},8,["loading","onClick","disabled"])])),_:1}),(0,r.Lk)("div",ha,[t[12]||(t[12]=(0,r.Lk)("span",null,"已经有账号?",-1)),(0,r.bF)(p,{to:"/login"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("立即登录")]))),_:1})])])),_:1},8,["model","rules"])])])}var fa={name:"RegisterView",setup(){const e=(0,s.Pj)(),t=(0,w.rd)(),a=(0,we.KR)(null),l=(0,we.Kh)({username:"",email:"",nickname:"",password:"",confirmPassword:""}),r=(0,we.KR)(!1),o=(0,we.KR)(!1),n=(0,we.KR)(""),i=(0,we.KR)(""),c=(e,t,a)=>{t!==l.password?a(new Error("两次输入的密码不一致")):a()},d={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在3-20个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入有效的电子邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:40,message:"密码长度应在6-40个字符之间",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:c,trigger:"blur"}]},m=()=>{a.value.validate((a=>{if(!a)return!1;r.value?(o.value=!0,n.value="",i.value="",e.dispatch("auth/register",{username:l.username,email:l.email,nickname:l.nickname,password:l.password}).then((e=>{i.value="注册成功！请登录您的账号",setTimeout((()=>{t.push("/login")}),3e3)})).catch((e=>{console.error("注册失败:",e),n.value=e.response?.data?.message||"注册失败，请稍后再试"})).finally((()=>{o.value=!1}))):u.nk.warning("请先同意服务条款")}))};return{registerForm:l,registerRules:d,agreement:r,loading:o,errorMessage:n,successMessage:i,handleRegister:m,registerFormRef:a}}};const ba=(0,_.A)(fa,[["render",ka],["__scopeId","data-v-455646ca"]]);var ya=ba;const wa={class:"profile-container"},Fa={class:"stats-container"},La={class:"stat-item"},_a={class:"stat-value"},Ca={class:"stat-item"},Ea={class:"stat-value"},Sa={class:"stat-item"},Aa={class:"stat-value"},Ta={class:"stat-item"},Da={class:"stat-value"};function Ra(e,t,a,l,o,n){const s=(0,r.g2)("el-input"),i=(0,r.g2)("el-form-item"),u=(0,r.g2)("el-divider"),c=(0,r.g2)("el-button"),m=(0,r.g2)("el-form"),p=(0,r.g2)("el-card");return(0,r.uX)(),(0,r.CE)("div",wa,[(0,r.bF)(p,{class:"profile-card"},{header:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h2",null,"个人中心")],-1)]))),default:(0,r.k6)((()=>[(0,r.bF)(m,{model:l.userForm,rules:l.rules,ref:"userFormRef","label-width":"100px",class:"profile-form"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{label:"用户名",prop:"username"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{modelValue:l.userForm.username,"onUpdate:modelValue":t[0]||(t[0]=e=>l.userForm.username=e),disabled:""},null,8,["modelValue"]),t[7]||(t[7]=(0,r.Lk)("small",null,"用户名不可修改",-1))])),_:1}),(0,r.bF)(i,{label:"昵称",prop:"nickname"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{modelValue:l.userForm.nickname,"onUpdate:modelValue":t[1]||(t[1]=e=>l.userForm.nickname=e),placeholder:"设置您的昵称"},null,8,["modelValue"])])),_:1}),(0,r.bF)(i,{label:"邮箱",prop:"email"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{modelValue:l.userForm.email,"onUpdate:modelValue":t[2]||(t[2]=e=>l.userForm.email=e),placeholder:"您的邮箱地址"},null,8,["modelValue"])])),_:1}),(0,r.bF)(u,{"content-position":"center"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("密码修改（可选）")]))),_:1}),(0,r.bF)(i,{label:"旧密码",prop:"oldPassword"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{modelValue:l.userForm.oldPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>l.userForm.oldPassword=e),type:"password",placeholder:"输入旧密码","show-password":""},null,8,["modelValue"])])),_:1}),(0,r.bF)(i,{label:"新密码",prop:"newPassword"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{modelValue:l.userForm.newPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>l.userForm.newPassword=e),type:"password",placeholder:"输入新密码","show-password":""},null,8,["modelValue"]),t[9]||(t[9]=(0,r.Lk)("small",null,"留空表示不修改密码",-1))])),_:1}),(0,r.bF)(i,{label:"确认密码",prop:"confirmPassword"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{modelValue:l.userForm.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=e=>l.userForm.confirmPassword=e),type:"password",placeholder:"再次输入新密码","show-password":""},null,8,["modelValue"])])),_:1}),(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(c,{type:"primary",onClick:l.submitForm,loading:l.loading},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.eW)("保存修改")]))),_:1},8,["onClick","loading"]),(0,r.bF)(c,{onClick:l.resetForm},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("重置")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,r.bF)(p,{class:"profile-stats-card"},{header:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h2",null,"账户统计")],-1)]))),default:(0,r.k6)((()=>[(0,r.Lk)("div",Fa,[(0,r.Lk)("div",La,[(0,r.Lk)("div",_a,(0,d.v_)(l.userStats.novelCount),1),t[13]||(t[13]=(0,r.Lk)("div",{class:"stat-label"},"上传小说",-1))]),(0,r.Lk)("div",Ca,[(0,r.Lk)("div",Ea,(0,d.v_)(l.userStats.totalViews||0),1),t[14]||(t[14]=(0,r.Lk)("div",{class:"stat-label"},"总浏览量",-1))]),(0,r.Lk)("div",Sa,[(0,r.Lk)("div",Aa,(0,d.v_)(l.userStats.favoriteCount||0),1),t[15]||(t[15]=(0,r.Lk)("div",{class:"stat-label"},"收藏数",-1))]),(0,r.Lk)("div",Ta,[(0,r.Lk)("div",Da,(0,d.v_)(l.userForm.lastLoginAt?l.formatDate(l.userForm.lastLoginAt):"首次登录"),1),t[16]||(t[16]=(0,r.Lk)("div",{class:"stat-label"},"上次登录",-1))])])])),_:1})])}const Ia={getCurrentUser(){return H.A.get("/user/me")},updateUserProfile(e){return H.A.put("/user/profile",e)},changePassword(e,t){return H.A.post("/user/change-password",{oldPassword:e,newPassword:t})},getUserStats(){return H.A.get("/user/stats")},getUserNovels(){return H.A.get("/user/novels")},uploadAvatar(e){const t={"Content-Type":"multipart/form-data"};return H.A.post("/user/avatar",e,{headers:t})},deleteAccount(e){return H.A.post("/user/delete-account",{password:e})}};var Na=Ia;a(116);const Va=localStorage.getItem("user");let Pa=null;try{Pa=Va?JSON.parse(Va):null}catch(Il){}const Oa=Pa?{status:{loggedIn:!0},user:Pa}:{status:{loggedIn:!1},user:null},xa={namespaced:!0,state:Oa,actions:{async login({commit:e},t){try{const a=await Y.login(t.username,t.password);if(!a||!a.token&&!a.accessToken)throw new Error("登录响应格式错误");return e("loginSuccess",a),a}catch(a){return e("loginFailure"),Promise.reject(a)}},logout({commit:e}){Y.logout(),e("logout")},async register({commit:e},t){try{const a=await Y.register(t.username,t.email,t.password);return e("registerSuccess"),Promise.resolve(a)}catch(a){return e("registerFailure"),Promise.reject(a)}},async refreshToken({commit:e},t){e("refreshToken",t)},async updateProfile({commit:e},t){e("updateUserProfile",t)}},mutations:{loginSuccess(e,t){e.status.loggedIn=!0,e.user=t},loginFailure(e){e.status.loggedIn=!1,e.user=null},logout(e){e.status.loggedIn=!1,e.user=null},registerSuccess(e){e.status.loggedIn=!1},registerFailure(e){e.status.loggedIn=!1},refreshToken(e,t){e.status.loggedIn=!0,e.user={...e.user,accessToken:t}},updateUserProfile(e,t){e.user&&(e.user={...e.user,...t},localStorage.setItem("user",JSON.stringify(e.user)))}},getters:{isLoggedIn:e=>e.status.loggedIn,currentUser:e=>e.user,username:e=>e.user&&(e.user.username||e.user.name)||"",userRoles:e=>e.user&&e.user.roles?e.user.roles:[]}};var Ua=(0,s.y$)({state:{novels:[],currentNovel:null,processingStatus:null,loading:!1,error:null},mutations:{SET_NOVELS(e,t){e.novels=t},SET_CURRENT_NOVEL(e,t){e.currentNovel=t},SET_PROCESSING_STATUS(e,t){e.processingStatus=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t}},actions:{async fetchNovels({commit:e}){try{e("SET_LOADING",!0);const t=await tt.getNovelList();let a=[];t&&(t.novels?a=t.novels:Array.isArray(t)?a=t:t.data&&t.data.novels?a=t.data.novels:t.data&&Array.isArray(t.data)&&(a=t.data)),e("SET_NOVELS",a),e("SET_ERROR",null)}catch(t){const a=[{id:1,title:"示例小说1",author:"作者A",processedChapters:10,totalChapters:20,description:"这是一部示例小说，用于开发测试"},{id:2,title:"示例小说2",author:"作者B",processedChapters:15,totalChapters:15,description:"这是另一部示例小说，已处理完成"}];e("SET_NOVELS",a),e("SET_ERROR","获取小说列表失败，显示示例数据")}finally{e("SET_LOADING",!1)}},async fetchNovelDetail({commit:e},t){try{e("SET_LOADING",!0);const a=await tt.getNovelDetail(t);e("SET_CURRENT_NOVEL",a),e("SET_ERROR",null)}catch(a){e("SET_ERROR","获取小说详情失败")}finally{e("SET_LOADING",!1)}},async uploadNovel({commit:e,dispatch:t},a){try{e("SET_LOADING",!0),e("SET_PROCESSING_STATUS","UPLOADING");const l=await tt.uploadNovel(a),r=l.id||l.novelId;e("SET_PROCESSING_STATUS","PROCESSING");const o=setInterval((async()=>{try{const a=await tt.getNovelStatus(r);if("NOT_FOUND"===a.status)return clearInterval(o),e("SET_PROCESSING_STATUS","FAILED"),void e("SET_ERROR",`小说处理失败: ${a.error}`);e("SET_PROCESSING_STATUS",a.status.toUpperCase()),"COMPLETED"!==a.status&&"FAILED"!==a.status||(clearInterval(o),"COMPLETED"===a.status&&await t("fetchNovelDetail",r))}catch(a){e("SET_ERROR","检查处理状态失败")}}),2e3);return r}catch(l){throw e("SET_ERROR","上传小说失败"),e("SET_PROCESSING_STATUS","FAILED"),l}finally{e("SET_LOADING",!1)}}},getters:{getNovelById:e=>t=>e.novels.find((e=>e.id===parseInt(t))),processingPercentage:e=>{if(!e.processingStatus)return 0;switch(e.processingStatus){case"UPLOADING":return 20;case"PROCESSING":return 60;case"COMPLETED":return 100;case"FAILED":return 0;default:return 0}},isLoggedIn:e=>e.auth&&e.auth.status&&e.auth.status.loggedIn,currentUser:e=>e.auth&&e.auth.user?e.auth.user:null},modules:{auth:xa}}),Wa={name:"ProfileView",setup(){const e=(0,we.KR)(null),t=(0,we.KR)(!1),a=(0,r.EW)((()=>Ua.state.auth.user)),l=(0,we.Kh)({novelCount:0,totalViews:0,favoriteCount:0}),o=(0,we.Kh)({id:"",username:"",email:"",nickname:"",createdAt:"",lastLoginAt:"",oldPassword:"",newPassword:"",confirmPassword:""}),n={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],nickname:[{max:50,message:"昵称长度不能超过50个字符",trigger:"blur"}],newPassword:[{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}],confirmPassword:[{validator:(e,t,a)=>{o.newPassword&&t!==o.newPassword?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}]},s=()=>{a.value&&(o.id=a.value.id,o.username=a.value.username,o.email=a.value.email,o.nickname=a.value.nickname||"",o.createdAt=a.value.createdAt,o.lastLoginAt=a.value.lastLoginAt,i())},i=async()=>{try{const e=await Na.getCurrentUser();e&&(o.id=e.id,o.email=e.email,o.nickname=e.nickname||"",o.createdAt=e.createdAt,o.lastLoginAt=e.lastLoginAt,Ua.commit("auth/updateUserProfile",{email:e.email,nickname:e.nickname,createdAt:e.createdAt,lastLoginAt:e.lastLoginAt}))}catch(e){console.error("获取用户信息失败:",e)}},c=async()=>{try{console.log("开始获取用户统计信息...");const e=await Na.getUserStats();console.log("获取用户统计信息成功，响应数据:",e),e?(console.log("用户统计数据:",e),l.novelCount=e.novelCount||0,l.totalViews=e.totalViews||0,l.favoriteCount=e.favoriteCount||0):(console.warn("获取用户统计信息响应数据为空"),l.novelCount=0,l.totalViews=0,l.favoriteCount=0)}catch(e){console.error("获取用户统计信息失败:",e),l.novelCount=0,l.totalViews=0,l.favoriteCount=0}},d=async()=>{e.value&&await e.value.validate((async e=>{if(e){t.value=!0;try{const e={id:o.id,email:o.email,nickname:o.nickname};if(o.newPassword){if(!o.oldPassword)return u.nk.error("修改密码需要输入旧密码"),void(t.value=!1);e.oldPassword=o.oldPassword,e.newPassword=o.newPassword}await Na.updateUserProfile(e),u.nk.success("个人信息更新成功"),Ua.commit("auth/updateUserProfile",{email:o.email,nickname:o.nickname}),o.oldPassword="",o.newPassword="",o.confirmPassword=""}catch(a){console.error("更新个人信息失败:",a),u.nk.error(a.response?.data?.message||"更新个人信息失败")}finally{t.value=!1}}}))},m=()=>{e.value&&(e.value.resetFields(),s())},p=e=>{if(!e)return"未知";try{const t=new Date(e);if(isNaN(t.getTime()))return"未知";const a=new Date;return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()?`今天 ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:1970===t.getFullYear()?"未知":t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("日期格式化错误:",t),"未知"}};return(0,r.sV)((()=>{s(),c()})),{userFormRef:e,userForm:o,userStats:l,rules:n,loading:t,submitForm:d,resetForm:m,formatDate:p}}};const Ma=(0,_.A)(Wa,[["render",Ra],["__scopeId","data-v-48c97181"]]);var za=Ma;const Ka={class:"my-novels-container"},Xa={key:0,class:"loading-container"},$a={key:1,class:"error-container"},Ba={class:"alert alert-danger",role:"alert"},qa={key:2,class:"empty-container"},ja={key:3,class:"novels-list"},Ga={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},Qa={class:"card h-100 novel-card"},Ha={class:"card-body"},Ja={class:"card-title"},Ya={class:"card-text text-muted"},Za={class:"card-text status-badge"},el={class:"card-text description"},tl={class:"card-footer bg-transparent border-top-0"},al=["onClick"],ll=["onClick"];function rl(e,t,a,l,o,n){const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ka,[t[10]||(t[10]=(0,r.Lk)("h1",null,"我的小说",-1)),o.loading?((0,r.uX)(),(0,r.CE)("div",Xa,t[1]||(t[1]=[(0,r.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,r.Lk)("span",{class:"visually-hidden"},"加载中...")],-1),(0,r.Lk)("p",null,"正在加载您的小说列表...",-1)]))):o.error?((0,r.uX)(),(0,r.CE)("div",$a,[(0,r.Lk)("div",Ba,[t[2]||(t[2]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.eW)(" "+(0,d.v_)(o.error),1)]),(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[0]||(t[0]=(...e)=>n.fetchUserNovels&&n.fetchUserNovels(...e))},t[3]||(t[3]=[(0,r.Lk)("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),(0,r.eW)(" 重试 ")]))])):0===o.novels.length?((0,r.uX)(),(0,r.CE)("div",qa,[t[5]||(t[5]=(0,r.Lk)("div",{class:"alert alert-info",role:"alert"},[(0,r.Lk)("i",{class:"bi bi-info-circle-fill me-2"}),(0,r.eW)(" 您还没有上传任何小说。 ")],-1)),(0,r.bF)(s,{to:"/upload",class:"btn btn-primary mt-3"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.Lk)("i",{class:"bi bi-upload me-1"},null,-1),(0,r.eW)(" 去上传小说 ")]))),_:1})])):((0,r.uX)(),(0,r.CE)("div",ja,[(0,r.Lk)("div",Ga,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.novels,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"col"},[(0,r.Lk)("div",Qa,[(0,r.Lk)("div",Ha,[(0,r.Lk)("h5",Ja,(0,d.v_)(e.title),1),(0,r.Lk)("p",Ya,[(0,r.Lk)("small",null,[t[6]||(t[6]=(0,r.Lk)("i",{class:"bi bi-calendar-event me-1"},null,-1)),(0,r.eW)(" 上传时间: "+(0,d.v_)(n.formatDate(e.createTime)),1)])]),(0,r.Lk)("p",Za,[(0,r.Lk)("span",{class:(0,d.C4)(n.getStatusBadgeClass(e.status))},(0,d.v_)(n.getStatusText(e.status)),3)]),(0,r.Lk)("p",el,(0,d.v_)(e.description||"暂无简介"),1)]),(0,r.Lk)("div",tl,[(0,r.bF)(s,{to:`/novel/${e.id}`,class:"btn btn-outline-primary btn-sm me-2"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("i",{class:"bi bi-book me-1"},null,-1),(0,r.eW)(" 查看详情 ")]))),_:2},1032,["to"]),"COMPLETED"===e.status?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-outline-success btn-sm me-2",onClick:t=>n.goToAnalyze(e.id)},t[8]||(t[8]=[(0,r.Lk)("i",{class:"bi bi-graph-up me-1"},null,-1),(0,r.eW)(" 查看分析 ")]),8,al)):(0,r.Q3)("",!0),(0,r.Lk)("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>n.confirmDelete(e)},t[9]||(t[9]=[(0,r.Lk)("i",{class:"bi bi-trash me-1"},null,-1),(0,r.eW)(" 删除 ")]),8,ll)])])])))),128))])]))])}var ol=a(2933),nl=Na,sl=a(788),il=a.n(sl);const ul=il().create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"http://localhost:8080/api",timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});ul.interceptors.request.use((e=>{const t=localStorage.getItem("user");if(t)try{const a=JSON.parse(t),l=a.token||a.accessToken;l&&(e.headers["Authorization"]=`Bearer ${l}`)}catch(Il){}return e}),(e=>Promise.reject(e))),ul.interceptors.response.use((e=>e.data),(e=>(e.response&&401===e.response.status&&(localStorage.removeItem("user"),"/login"!==window.location.pathname&&(window.location.href="/login?redirect="+encodeURIComponent(window.location.pathname))),Promise.reject(e))));var cl=ul;const dl={getAllNovels(){return cl.get("/novels")},getNovelById(e){return cl.get(`/novels/${e}`)},getNovelStatus(e){return cl.get(`/novels/${e}/status`)},uploadNovel(e){return cl.post("/novels/upload",e,{headers:{"Content-Type":"multipart/form-data"}})},getChapters(e){return cl.get(`/novels/${e}/chapters`)},getTags(e){return cl.get(`/novels/${e}/tags`)},deleteNovel(e){return cl.delete(`/novels/${e}`)}};var ml=dl,pl={name:"MyNovelsView",data(){return{novels:[],loading:!0,error:null,selectedNovel:null}},created(){this.fetchUserNovels()},methods:{async fetchUserNovels(){this.loading=!0,this.error=null;try{const e=await nl.getUserNovels();console.log("获取用户小说原始响应:",e);let t=[];e&&(Array.isArray(e)?t=e:e.novels&&Array.isArray(e.novels)&&(t=e.novels)),this.novels=t,console.log("获取用户小说成功:",this.novels)}catch(e){console.error("获取小说列表失败:",e),"未登录"===e.message||"用户ID不存在"===e.message?(this.error="请先登录后再查看您的小说",setTimeout((()=>{this.$router.push("/login?redirect=/my-novels")}),2e3)):this.error=e.response?.data?.error||"获取小说列表失败，请稍后重试",this.novels=[]}finally{this.loading=!1}},formatDate(e){if(!e)return"未知";const t=new Date(e);return t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},getStatusText(e){const t={PENDING:"待处理",PROCESSING:"处理中",COMPLETED:"已完成",FAILED:"处理失败"};return t[e]||e},getStatusBadgeClass(e){const t={PENDING:"badge bg-warning",PROCESSING:"badge bg-info",COMPLETED:"badge bg-success",FAILED:"badge bg-danger"};return t[e]||"badge bg-secondary"},goToAnalyze(e){this.$router.push(`/analyze/${e}`)},confirmDelete(e){this.selectedNovel=e,ol.s.confirm(`您确定要删除小说 "${e.title}" 吗？此操作不可逆，删除后将无法恢复！`,"确认删除",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning"}).then((()=>{this.deleteNovel()})).catch((()=>{}))},async deleteNovel(){if(this.selectedNovel)try{await ml.deleteNovel(this.selectedNovel.id),this.novels=this.novels.filter((e=>e.id!==this.selectedNovel.id)),(0,u.nk)({type:"success",message:"小说删除成功"})}catch(e){console.error("删除小说失败:",e),(0,u.nk)({type:"error",message:e.response?.data?.error||"删除小说失败，请稍后重试"})}finally{this.selectedNovel=null}}}};const gl=(0,_.A)(pl,[["render",rl],["__scopeId","data-v-61feb3c1"]]);var vl=gl;const hl={class:"novel-visualization-container"},kl={class:"header"},fl={class:"title-section"},bl={class:"action-buttons"},yl={key:0,class:"author-info"},wl={key:1,class:"global-loading"};function Fl(e,t,a,l,o,n){const s=(0,r.g2)("Back"),i=(0,r.g2)("el-icon"),u=(0,r.g2)("el-button"),c=(0,r.g2)("Refresh"),m=(0,r.g2)("el-tooltip"),p=(0,r.g2)("Download"),g=(0,r.g2)("FullScreen"),v=(0,r.g2)("keyword-cloud"),h=(0,r.g2)("el-tab-pane"),k=(0,r.g2)("plot-trend-chart"),f=(0,r.g2)("structure-analysis-chart"),b=(0,r.g2)("el-tabs"),y=(0,r.g2)("el-spinner"),w=(0,r.g2)("el-alert");return(0,r.uX)(),(0,r.CE)("div",hl,[(0,r.Lk)("div",kl,[(0,r.Lk)("div",fl,[(0,r.bF)(u,{onClick:l.goBack,size:"small"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(s)])),_:1}),t[2]||(t[2]=(0,r.eW)(" 返回 "))])),_:1},8,["onClick"]),(0,r.Lk)("h2",null,(0,d.v_)(l.novel?l.novel.title:"小说")+"可视化分析",1)]),(0,r.Lk)("div",bl,[(0,r.bF)(m,{content:"刷新数据",placement:"top","show-after":500},{default:(0,r.k6)((()=>[(0,r.bF)(u,{onClick:l.refreshData,loading:l.loading,circle:"",size:"small"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(c)])),_:1})])),_:1},8,["onClick","loading"])])),_:1}),(0,r.bF)(m,{content:"下载当前图表",placement:"top","show-after":500},{default:(0,r.k6)((()=>[(0,r.bF)(u,{onClick:l.downloadChart,circle:"",size:"small"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(p)])),_:1})])),_:1},8,["onClick"])])),_:1}),(0,r.bF)(m,{content:"全屏显示",placement:"top","show-after":500},{default:(0,r.k6)((()=>[(0,r.bF)(u,{onClick:l.toggleFullScreen,circle:"",size:"small"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(g)])),_:1})])),_:1},8,["onClick"])])),_:1})])]),l.novel?((0,r.uX)(),(0,r.CE)("p",yl,"作者: "+(0,d.v_)(l.novel.author),1)):(0,r.Q3)("",!0),(0,r.bF)(b,{modelValue:l.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>l.activeTab=e),type:"border-card",class:"visualization-tabs"},{default:(0,r.k6)((()=>[(0,r.bF)(h,{label:"关键词云",name:"keywords"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{keywords:l.keywordData,loading:l.loadingKeywords,title:"小说关键词分布",height:"500px",ref:"keywordCloudRef"},null,8,["keywords","loading"])])),_:1}),(0,r.bF)(h,{label:"情节波动图",name:"emotional"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{"plot-data":l.emotionalData,loading:l.loadingEmotional,title:"情节波动趋势",height:"500px",ref:"plotTrendRef"},null,8,["plot-data","loading"])])),_:1}),(0,r.bF)(h,{label:"结构分析",name:"structure"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{"structure-data":l.structureData,loading:l.loadingStructure,height:"550px",ref:"structureChartRef"},null,8,["structure-data","loading"])])),_:1})])),_:1},8,["modelValue"]),l.loading?((0,r.uX)(),(0,r.CE)("div",wl,[(0,r.bF)(y,{size:"large"}),t[3]||(t[3]=(0,r.Lk)("p",null,"正在加载可视化数据...",-1))])):(0,r.Q3)("",!0),l.errorMessage?((0,r.uX)(),(0,r.Wv)(w,{key:2,title:l.errorMessage,type:"error","show-icon":"",onClose:t[1]||(t[1]=e=>l.errorMessage="")},null,8,["title"])):(0,r.Q3)("",!0)])}var Ll={name:"NovelVisualizationView",components:{KeywordCloud:gt,PlotTrendChart:_t,StructureAnalysisChart:Nt,Back:F.kcb,Refresh:F.C42,Download:F.f5X,FullScreen:F.mcU},setup(){const e=(0,w.lq)(),t=(0,w.rd)(),a=(0,we.KR)("keywords"),l=(0,we.KR)(null),o=(0,we.KR)(!1),n=(0,we.KR)(""),s=(0,we.KR)([]),i=(0,we.KR)([]),c=(0,we.KR)({}),d=(0,we.KR)(null),m=(0,we.KR)(null),p=(0,we.KR)(null),g=(0,we.KR)(!1),v=(0,we.KR)(!1),h=(0,we.KR)(!1),k=()=>{t.back()},f=()=>{const t=e.params.id?parseInt(e.params.id):null;t?(F(t),L(t),u.nk.success("数据刷新中...")):u.nk.warning("无法刷新，缺少小说ID")},b=()=>{let e=null,t="chart";switch(a.value){case"keywords":e=d.value?.chartRef?.chart,t="关键词云";break;case"emotional":e=m.value?.chartRef?.chart,t="情节波动图";break;case"structure":e=p.value?.chartRef?.chart,t="结构分析图";break}if(e)try{const a=e.getDataURL({pixelRatio:2,backgroundColor:"#fff"}),r=document.createElement("a");r.download=`${l.value?.title||"小说"}-${t}.png`,r.href=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),u.nk.success("图表已下载")}catch(r){console.error("下载图表失败:",r),u.nk.error("下载图表失败")}else u.nk.warning("当前没有可下载的图表")},y=()=>{let e=null;switch(a.value){case"keywords":e=d.value?.$el;break;case"emotional":e=m.value?.$el;break;case"structure":e=p.value?.$el;break}if(e)try{document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}catch(t){console.error("全屏切换失败:",t),u.nk.error("全屏切换失败")}else u.nk.warning("无法进入全屏模式")},F=async e=>{try{const t=await ml.getNovelById(e);l.value=t.data}catch(t){console.error("获取小说信息失败:",t),n.value="获取小说信息失败: "+(t.response?.data?.error||t.message)}},L=async e=>{o.value=!0,n.value="",g.value=!0,v.value=!0,h.value=!0;try{try{const t=await lt.getAllVisualizationData(e),a=t.data;a.keywords&&(s.value=a.keywords),a.emotional&&(i.value=a.emotional),a.structure&&(c.value=a.structure)}catch(t){console.warn("获取所有数据失败，尝试单独获取各部分:",t),await Promise.allSettled([(async()=>{try{const t=await lt.getKeywordCloudData(e);s.value=t.data||[]}catch(Il){console.error("获取关键词云数据失败:",Il)}})(),(async()=>{try{const t=await lt.getEmotionalFluctuationData(e);i.value=t.data&&t.data.emotional?t.data.emotional:t.data||[]}catch(Il){console.error("获取情节波动图数据失败:",Il)}})(),(async()=>{try{const t=await lt.getStructureAnalysisData(e);c.value=t.data||{}}catch(Il){console.error("获取结构分析数据失败:",Il)}})()])}}catch(t){console.error("获取可视化数据失败:",t),n.value="获取可视化数据失败: "+(t.response?.data?.error||t.message)}finally{o.value=!1,g.value=!1,v.value=!1,h.value=!1}};return(0,r.wB)((()=>e.params.id),(e=>{if(e){const t=parseInt(e);F(t),L(t)}})),(0,r.sV)((()=>{const t=e.params.id?parseInt(e.params.id):null;t&&(F(t),L(t))})),{novel:l,loading:o,errorMessage:n,keywordData:s,emotionalData:i,structureData:c,loadingKeywords:g,loadingEmotional:v,loadingStructure:h,activeTab:a,keywordCloudRef:d,plotTrendRef:m,structureChartRef:p,goBack:k,refreshData:f,downloadChart:b,toggleFullScreen:y}}};const _l=(0,_.A)(Ll,[["render",Fl],["__scopeId","data-v-3bbc736b"]]);var Cl=_l;const El=[{path:"/",name:"home",component:_e,meta:{title:"首页 - 小说智析"}},{path:"/upload",name:"upload",component:qt,meta:{title:"上传小说 - 小说智析",requiresAuth:!0}},{path:"/analyze",name:"analyze",component:ra,meta:{title:"处理中 - 小说智析",requiresAuth:!0}},{path:"/novel/:id",name:"novel-detail",component:Ot,meta:{title:"小说分析结果 - 小说智析"}},{path:"/novel/:id/visualization",name:"novel-visualization",component:Cl,meta:{title:"小说可视化分析 - 小说智析"}},{path:"/login",name:"login",component:ma,meta:{title:"登录 - 小说智析",hideForAuth:!0}},{path:"/register",name:"register",component:ya,meta:{title:"注册 - 小说智析",hideForAuth:!0}},{path:"/profile",name:"profile",component:za,meta:{title:"个人中心 - 小说智析",requiresAuth:!0}},{path:"/my-novels",name:"myNovels",component:vl,meta:{title:"我的小说 - 小说智析",requiresAuth:!0}},{path:"/about",name:"about",component:()=>a.e(92).then(a.bind(a,5092)),meta:{title:"关于 - 小说智析"}},{path:"/admin",name:"admin",component:()=>a.e(995).then(a.bind(a,3376)),meta:{title:"小说智析 - 管理后台",requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/dashboard",name:"admin-dashboard",component:()=>a.e(945).then(a.bind(a,3945)),meta:{title:"管理员仪表盘 - 小说智析",requiresAuth:!0,adminOnly:!0}},{path:"/admin/users",name:"admin-users",component:()=>a.e(446).then(a.bind(a,9065)),meta:{title:"用户管理 - 小说智析",requiresAuth:!0,adminOnly:!0}},{path:"/admin/novels",name:"admin-novels",component:()=>a.e(93).then(a.bind(a,8093)),meta:{title:"小说管理 - 小说智析",requiresAuth:!0,adminOnly:!0}},{path:"/admin/logs",name:"admin-logs",component:()=>a.e(331).then(a.bind(a,6331)),meta:{title:"系统日志 - 小说智析",requiresAuth:!0,adminOnly:!0}},{path:"/admin/visualization",name:"admin-visualization",component:()=>a.e(376).then(a.bind(a,2376)),meta:{title:"小说可视化 - 小说智析",requiresAuth:!0,adminOnly:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>a.e(805).then(a.bind(a,4805)),meta:{title:"404 - 小说智析"}}],Sl=(0,w.aE)({history:(0,w.LA)("/"),routes:El});Sl.beforeEach(((e,t,a)=>{if(document.title=e.meta.title||"小说智析",e.meta.requiresAuth){const t=localStorage.getItem("user");if(!t)return void a({name:"login"});const l=JSON.parse(t);if(e.meta.adminOnly){const e=l.roles&&l.roles.includes("ROLE_ADMIN");if(!e)return void a({name:"home"})}}a()}));var Al=Sl,Tl=a(8371);a(4188);window.echarts=it;const Dl=window.console.error;window.console.error=(...e)=>{e[0]&&"string"===typeof e[0]&&e[0].includes("ResizeObserver loop")||Dl(...e)};const Rl=(0,l.Ef)(ae);Rl.use(Al),Rl.use(Ua),Rl.use(Tl.A,{locale:c.A}),Rl.mount("#app")}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var o=t[l]={exports:{}};return e[l].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,l,r,o){if(!l){var n=1/0;for(c=0;c<e.length;c++){l=e[c][0],r=e[c][1],o=e[c][2];for(var s=!0,i=0;i<l.length;i++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[i])}))?l.splice(i--,1):(s=!1,o<n&&(n=o));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,l){return a.f[l](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{92:"032381da",93:"4f0117db",331:"73d0e8e2",376:"e13208f9",446:"636ad18f",805:"fc829e58",945:"a77d0ef5",995:"6e079941"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{92:"12218ec2",93:"d720c359",331:"8efefd22",376:"bd849e44",446:"9fc39ba5",805:"2ff0de41",945:"b457613d",995:"8a0be224"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="novel-assistant-frontend:";a.l=function(l,r,o,n){if(e[l])e[l].push(r);else{var s,i;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==l||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(i=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+o),s.src=l),e[l]=[r];var m=function(t,a){s.onerror=s.onload=null,clearTimeout(p);var r=e[l];if(delete e[l],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),i&&document.head.appendChild(s)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,l,r,o){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",a.nc&&(n.nonce=a.nc);var s=function(a){if(n.onerror=n.onload=null,"load"===a.type)r();else{var l=a&&a.type,s=a&&a.target&&a.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+l+": "+s+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=l,i.request=s,n.parentNode&&n.parentNode.removeChild(n),o(i)}};return n.onerror=n.onload=s,n.href=t,l?l.parentNode.insertBefore(n,l.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var r=a[l],o=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(o===e||o===t))return r}var n=document.getElementsByTagName("style");for(l=0;l<n.length;l++){r=n[l],o=r.getAttribute("data-href");if(o===e||o===t)return r}},l=function(l){return new Promise((function(r,o){var n=a.miniCssF(l),s=a.p+n;if(t(n,s))return r();e(l,s,null,r,o)}))},r={524:0};a.f.miniCss=function(e,t){var a={92:1,93:1,331:1,376:1,446:1,805:1,945:1,995:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=l(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,l){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)l.push(r[2]);else{var o=new Promise((function(a,l){r=e[t]=[a,l]}));l.push(r[2]=o);var n=a.p+a.u(t),s=new Error,i=function(l){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var o=l&&("load"===l.type?"missing":l.type),n=l&&l.target&&l.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",s.name="ChunkLoadError",s.type=o,s.request=n,r[1](s)}};a.l(n,i,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,o,n=l[0],s=l[1],i=l[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(i)var c=i(a)}for(t&&t(l);u<n.length;u++)o=n[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},l=self["webpackChunknovel_assistant_frontend"]=self["webpackChunknovel_assistant_frontend"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(7974)}));l=a.O(l)})();