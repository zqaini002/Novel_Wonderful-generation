"use strict";(self["webpackChunknovel_assistant_frontend"]=self["webpackChunknovel_assistant_frontend"]||[]).push([[945],{3339:function(e,a,s){var t=s(412);const l={async getDashboardStats(){return t.A.get("/admin/dashboard")},async getAllUsers(){return t.A.get("/admin/users")},async getUserDetail(e){if(!e)throw new Error("用户ID不能为空");return t.A.get(`/admin/users/${e}`)},async updateUserStatus(e,a){if(!e)throw new Error("用户ID不能为空");return t.A.put(`/admin/users/${e}/status`,{enabled:a})},async updateUserInfo(e,a){if(!e)throw new Error("用户ID不能为空");return t.A.put(`/admin/users/${e}`,a)},async deleteUser(e){if(!e)throw new Error("用户ID不能为空");return t.A.delete(`/admin/users/${e}`)},async getAllNovels(){return t.A.get("/admin/novels")},async deleteNovel(e){if(!e)throw new Error("小说ID不能为空");return t.A.delete(`/admin/novels/${e}`)},async getSystemLogs(e=0,a=20,s={}){let l=`/admin/logs?page=${e}&size=${a}`;return s.level&&"ALL"!==s.level&&(l+=`&level=${s.level}`),s.startDate&&(l+=`&startDate=${s.startDate}`),s.endDate&&(l+=`&endDate=${s.endDate}`),s.query&&(l+=`&query=${encodeURIComponent(s.query)}`),s.userId&&(l+=`&userId=${String(s.userId)}`),console.log("系统日志请求URL:",l),t.A.get(l)},async clearSystemCache(){return t.A.post("/admin/cache/clear")}};a.A=l},3945:function(e,a,s){s.r(a),s.d(a,{default:function(){return C}});s(4114);var t=s(6768),l=s(144),r=s(4232),n=s(1387),d=s(1219),o=s(2933),u=s(7477),c=s(3339);const i={class:"dashboard-container"},v={class:"card-header"},k={key:0,class:"loading-container"},h={key:1,class:"dashboard-content"},b={class:"stats-cards"},f={class:"stat-header"},_={class:"stat-value"},F={class:"stat-header"},p={class:"stat-value"},g={class:"stat-header"},w={class:"stat-value"},m={class:"stat-header"},y={class:"stat-value"},L={class:"stat-header"},A={class:"stat-value"},N={class:"actions-grid"};var D={__name:"DashboardView",setup(e){const a=(0,n.rd)(),s=(0,l.KR)(!0),D=(0,l.KR)({totalUsers:0,newUsers:0,totalNovels:0,processingNovels:0,completedNovels:0}),R=async()=>{s.value=!0;try{const e=await c.A.getDashboardStats();console.log("仪表盘API响应:",e),e?D.value=e:(D.value={totalUsers:0,newUsers:0,totalNovels:0,processingNovels:0,completedNovels:0},console.warn("仪表盘数据返回为空，使用默认值"))}catch(e){console.error("获取仪表盘数据失败:",e),d.nk.error("获取仪表盘数据失败: "+(e.message||"未知错误")),D.value={totalUsers:0,newUsers:0,totalNovels:0,processingNovels:0,completedNovels:0}}finally{s.value=!1}},U=()=>{R()},C=()=>{a.push("/admin/users")},I=()=>{a.push("/admin/novels")},$=()=>{a.push("/admin/logs")},W=()=>{a.push("/admin/visualization")},E=async()=>{try{await o.s.confirm("确定要清理系统缓存吗？这可能会暂时影响系统性能。","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await c.A.clearSystemCache(),d.nk.success("缓存清理成功")}catch(e){"cancel"!==e&&(console.error("清理缓存失败:",e),d.nk.error("清理缓存失败"))}};return(0,t.sV)((()=>{R()})),(e,a)=>{const n=(0,t.g2)("el-button"),d=(0,t.g2)("el-skeleton"),o=(0,t.g2)("el-icon"),c=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(c,{class:"dashboard-card"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",v,[a[1]||(a[1]=(0,t.Lk)("h2",null,"系统仪表盘",-1)),(0,t.bF)(n,{type:"primary",onClick:U},{default:(0,t.k6)((()=>a[0]||(a[0]=[(0,t.eW)("刷新数据")]))),_:1})])])),default:(0,t.k6)((()=>[s.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(d,{rows:6,animated:""})])):((0,t.uX)(),(0,t.CE)("div",h,[(0,t.Lk)("div",b,[(0,t.bF)(c,{class:"stat-card",shadow:"hover"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",f,[a[2]||(a[2]=(0,t.Lk)("span",null,"总用户数",-1)),(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.KJW))])),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",_,(0,r.v_)(D.value?.totalUsers||0),1)])),_:1}),(0,t.bF)(c,{class:"stat-card",shadow:"hover"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",F,[a[3]||(a[3]=(0,t.Lk)("span",null,"新增用户",-1)),(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.eHG))])),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",p,(0,r.v_)(D.value?.newUsers||0),1),a[4]||(a[4]=(0,t.Lk)("div",{class:"stat-desc"},"过去7天",-1))])),_:1}),(0,t.bF)(c,{class:"stat-card",shadow:"hover"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",g,[a[5]||(a[5]=(0,t.Lk)("span",null,"小说总数",-1)),(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.zKN))])),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",w,(0,r.v_)(D.value?.totalNovels||0),1)])),_:1}),(0,t.bF)(c,{class:"stat-card",shadow:"hover"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",m,[a[6]||(a[6]=(0,t.Lk)("span",null,"处理中",-1)),(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.Rhj))])),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",y,(0,r.v_)(D.value?.processingNovels||0),1)])),_:1}),(0,t.bF)(c,{class:"stat-card",shadow:"hover"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",L,[a[7]||(a[7]=(0,t.Lk)("span",null,"已完成",-1)),(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.Jlk))])),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",A,(0,r.v_)(D.value?.completedNovels||0),1)])),_:1})]),(0,t.bF)(c,{class:"quick-actions",shadow:"hover"},{header:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("h3",null,"快捷操作")],-1)]))),default:(0,t.k6)((()=>[(0,t.Lk)("div",N,[(0,t.bF)(n,{onClick:C},{default:(0,t.k6)((()=>[(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.KJW))])),_:1}),a[9]||(a[9]=(0,t.eW)(" 用户管理 "))])),_:1}),(0,t.bF)(n,{onClick:I},{default:(0,t.k6)((()=>[(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.zKN))])),_:1}),a[10]||(a[10]=(0,t.eW)(" 小说管理 "))])),_:1}),(0,t.bF)(n,{onClick:$},{default:(0,t.k6)((()=>[(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.yoT))])),_:1}),a[11]||(a[11]=(0,t.eW)(" 系统日志 "))])),_:1}),(0,t.bF)(n,{onClick:W},{default:(0,t.k6)((()=>[(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.rW1))])),_:1}),a[12]||(a[12]=(0,t.eW)(" 小说可视化 "))])),_:1}),(0,t.bF)(n,{onClick:E},{default:(0,t.k6)((()=>[(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,l.R1)(u.epd))])),_:1}),a[13]||(a[13]=(0,t.eW)(" 清理缓存 "))])),_:1})])])),_:1})]))])),_:1})])}}},R=s(1241);const U=(0,R.A)(D,[["__scopeId","data-v-e117b2f8"]]);var C=U}}]);